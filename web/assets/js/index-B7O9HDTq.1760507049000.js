import{j as he}from"./qrcode-vue3-D8yUKOQT.1760507049000.js";import{r as M}from"./request-CTIq2jHo.1760507049000.js";import{c as qe}from"./vue-clipboard3-B8LfBGR5.1760507049000.js";import{O as h,F as ge,v as xe,f as we,Y as ze,Z as Ve,I as ve,$ as Ce,T as Te,S as Ue,h as Se,a0 as Me,e as fe,B as me,r as te,a1 as He,W as Ne,t as We,R as Ae}from"./ant-design-vue-CaKETSag.1760507049000.js";import{a8 as de,N as $e,a9 as Je,P as Qe,a3 as _e,a4 as Ze,A as Ke,D as Xe,E as Ye}from"./@ant-design-DU1tOc2n.1760507049000.js";import{r as _,a as Ge,V as x,W as r,X as l,c as t,Z as R,a1 as S,F as H,J as u,u as L,a3 as le,L as ke,w as ne,j as Le,t as ce,$ as U,_ as el}from"./vue-DcFgi5qX.1760507049000.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.1760507049000.js";import{d as ll}from"./lodash-es-C9rdhAyu.1760507049000.js";import"./axios-ngrFHoWO.1760507049000.js";import"./qs-Cr-9-1rL.1760507049000.js";import"./clipboard-DnI0MzOy.1760507049000.js";import"./side-channel-D4tUDHLn.1760507049000.js";import"./crypto-js-DSJylPV1.1760507049000.js";import"./index-DPJYWQp6.1760507049000.js";import"./vue-i18n-D-JJ4q2Z.1760507049000.js";import"./@intlify-C7-MzqOv.1760507049000.js";import"./nprogress-Dm7o-FuV.1760507049000.js";/* empty css                                  */import"./dayjs-BsDAZE4w.1760507049000.js";import"./pinia-C8DwDjaK.1760507049000.js";import"./pinia-plugin-persistedstate-n2tMOXAx.1760507049000.js";import"./vue-router-CJG71Oo3.1760507049000.js";import"./@iconify-BbADy1ey.1760507049000.js";import"./@babel-Bq4_u9L9.1760507049000.js";import"./@ctrl-DOFZgDuz.1760507049000.js";import"./resize-observer-polyfill-B1PUzC5B.1760507049000.js";import"./dom-align-CRCehRfe.1760507049000.js";import"./async-validator-9PlIezaS.1760507049000.js";import"./scroll-into-view-if-needed-B3z4cY-J.1760507049000.js";import"./throttle-debounce-CUWDS_la.1760507049000.js";import"./vue-types-CF28atMM.1760507049000.js";import"./@emotion-BtrR-yrm.1760507049000.js";import"./stylis-D5iaQeiq.1760507049000.js";const B={getLiveList(c){return M({url:"/live",method:"get",params:c})},getLiveInfo(c){return M({url:`/live/info/${c}`,method:"get"})},postPlayStart(c){return M({url:`/live/play/start/${c}`,method:"get"})},postPlayStop(c){return M({url:`/live/play/stop/${c}`,method:"get"})},getStreamInfo(c){return M({url:`/live/stream/info/${c}`,method:"get"})},postLive(c,$){return M({url:`/live/${c}`,method:"post",data:$})},putLive(c,$,g){return M({url:`/live/${c}/${$}`,method:"put",data:g})},putLiveOne(c,$,g,s){return M({url:`/live/${c}/${$}/${g}/${s}`,method:"put"})},deleteLive(c){return M({url:`/live/${c}`,method:"delete"})}},{toClipboard:tl}=qe(),oe=async(c,$="")=>{try{await tl(c),h.success({description:$+" 复制成功!"})}catch{h.error({description:$+" 复制失败!"})}},nl={__name:"form",emits:["ok"],setup(c,{expose:$,emit:g}){const s=g,w=_(!1),b=_("pull"),v=_(!1),k=_(0),e=Ge({}),C=()=>{e.isLive&&(e.speedEnum=0),v.value?B.postLive(b.value,ke(e)).then(o=>{o.status==200&&(h.success({description:"添加成功!"}),s("ok"))}):B.putLive(b.value,k.value,ke(e)).then(o=>{o.status==200&&(h.success({description:"修改成功!"}),s("ok"))})},E=o=>{console.log("Failed:",o)},D=o=>{p(),o==null?v.value=!0:(b.value=o.liveType,v.value=!1,e.name=o==null?void 0:o.name,e.url=o==null?void 0:o.url,e.enable=o==null?void 0:o.enable,e.onDemand=o==null?void 0:o.onDemand,e.audio=o==null?void 0:o.audio,e.transType=o==null?void 0:o.transType,e.authed=o==null?void 0:o.authed,e.speedEnum=o==null?void 0:o.speedEnum,e.isLive=o==null?void 0:o.isLive,k.value=o==null?void 0:o.id),w.value=!0},P=()=>{B.putLiveOne(b.value,k.value,"sign",0).then(o=>{o.status==200&&(queryData(),h.success({description:"更新成功!"}))})},T=()=>{w.value=!1},p=()=>{e.name="",e.url="",e.authed=!0,e.enable=!0,e.onDemand=!1,e.audio=!1,e.transType="TCP",e.isLive=!0,e.speedEnum=0,k.value=0,b.value="pull"},j={style:{width:"80px"}};return $({setOpen:D,setClose:T}),(o,n)=>{const Y=we,I=xe,q=Ve,Q=ze,Z=ve,G=Te,ae=Ce,W=Se,se=Ue,ee=Me,A=me,ue=fe,ie=ge,re=te;return r(),x(re,{open:w.value,"onUpdate:open":n[14]||(n[14]=y=>w.value=y),title:v.value?"添加":"编辑"},{footer:l(()=>[...n[33]||(n[33]=[])]),default:l(()=>[t(ie,{model:e,"label-col":j,onFinish:C,onFinishFailed:E},{default:l(()=>[t(I,{label:"启用"},{default:l(()=>[t(Y,{checked:e.enable,"onUpdate:checked":n[0]||(n[0]=y=>e.enable=y)},null,8,["checked"])]),_:1}),t(I,{label:"类型"},{default:l(()=>[t(Q,{value:b.value,"onUpdate:value":n[1]||(n[1]=y=>b.value=y)},{default:l(()=>[k.value==0?(r(),R(H,{key:0},[t(q,{value:"pull"},{default:l(()=>[...n[15]||(n[15]=[u("拉流",-1)])]),_:1}),t(q,{value:"push"},{default:l(()=>[...n[16]||(n[16]=[u("推流",-1)])]),_:1})],64)):(r(),R(H,{key:1},[b.value=="pull"?(r(),x(q,{key:0,value:"pull"},{default:l(()=>[...n[17]||(n[17]=[u("拉流",-1)])]),_:1})):S("",!0),b.value=="push"?(r(),x(q,{key:1,value:"push"},{default:l(()=>[...n[18]||(n[18]=[u("推流",-1)])]),_:1})):S("",!0)],64))]),_:1},8,["value"])]),_:1}),t(I,{label:"名称",name:"name",rules:[{required:!0,message:"名称不能为空!"}]},{default:l(()=>[t(Z,{value:e.name,"onUpdate:value":n[2]||(n[2]=y=>e.name=y),placeholder:"请输入名称"},null,8,["value"])]),_:1}),b.value=="push"?(r(),R(H,{key:0},[t(I,{label:"推流鉴权"},{default:l(()=>[t(Y,{checked:e.authed,"onUpdate:checked":n[3]||(n[3]=y=>e.authed=y)},null,8,["checked"])]),_:1}),e.url!=""?(r(),x(I,{key:0,label:"推流地址"},{default:l(()=>[t(Z,{value:e.url,"onUpdate:value":n[6]||(n[6]=y=>e.url=y),disabled:""},{addonBefore:l(()=>[t(ae,{placement:"top"},{content:l(()=>[t(G,{bordered:!1,color:"warning"},{default:l(()=>[...n[19]||(n[19]=[u("注: 启用鉴权后更新鉴权，推流会断开重新校验!",-1)])]),_:1})]),title:l(()=>[...n[20]||(n[20]=[])]),default:l(()=>[t(L($e),{class:"cp",onClick:n[4]||(n[4]=y=>P())})]),_:1})]),addonAfter:l(()=>[t(L(de),{class:"cp",onClick:n[5]||(n[5]=y=>L(oe)(e.url))})]),_:1},8,["value"])]),_:1})):S("",!0),e.url!=""?(r(),x(I,{key:1,label:"扫码推流"},{default:l(()=>[t(L(he),{width:200,height:200,value:e.url,qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"H"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,margin:0},dotsOptions:{type:"dots",color:"#000000",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#000000"},{offset:1,color:"#000000"}]}},backgroundOptions:{color:"#ffffff"},cornersSquareOptions:{type:"dot",color:"#000000"},cornersDotOptions:{type:void 0,color:"#000000"},fileExt:"png",myclass:"my-qur",imgclass:"img-qr"},null,8,["value"])]),_:1})):S("",!0)],64)):S("",!0),b.value=="pull"?(r(),R(H,{key:1},[t(I,{label:"地址"},{default:l(()=>[t(Z,{value:e.url,"onUpdate:value":n[7]||(n[7]=y=>e.url=y),placeholder:"请输入地址rtsp://"},null,8,["value"])]),_:1}),t(I,{label:"流类型"},{default:l(()=>[t(Q,{value:e.isLive,"onUpdate:value":n[8]||(n[8]=y=>e.isLive=y)},{default:l(()=>[t(q,{value:!0},{default:l(()=>[...n[21]||(n[21]=[u("在线流",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e.isLive?S("",!0):(r(),x(I,{key:0,label:"倍速"},{default:l(()=>[t(se,{value:e.speedEnum,"onUpdate:value":n[9]||(n[9]=y=>e.speedEnum=y),style:{width:"133px"}},{default:l(()=>[t(W,{value:0},{default:l(()=>[...n[22]||(n[22]=[u("标准",-1)])]),_:1}),t(W,{value:6},{default:l(()=>[...n[23]||(n[23]=[u("2倍速",-1)])]),_:1}),t(W,{value:7},{default:l(()=>[...n[24]||(n[24]=[u("4倍速",-1)])]),_:1}),t(W,{value:8},{default:l(()=>[...n[25]||(n[25]=[u("8倍速",-1)])]),_:1}),t(W,{value:9},{default:l(()=>[...n[26]||(n[26]=[u("16倍速",-1)])]),_:1})]),_:1},8,["value"])]),_:1})),t(I,{label:"协议"},{default:l(()=>[t(Q,{value:e.transType,"onUpdate:value":n[10]||(n[10]=y=>e.transType=y)},{default:l(()=>[t(q,{value:"TCP"},{default:l(()=>[...n[27]||(n[27]=[u("TCP",-1)])]),_:1}),t(q,{value:"UDP"},{default:l(()=>[...n[28]||(n[28]=[u("UDP",-1)])]),_:1}),t(q,{value:"Multicast"},{default:l(()=>[...n[29]||(n[29]=[u("其他",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(I,{label:"其他"},{default:l(()=>[t(ee,{checked:e.onDemand,"onUpdate:checked":n[11]||(n[11]=y=>e.onDemand=y)},{default:l(()=>[...n[30]||(n[30]=[u("按需",-1)])]),_:1},8,["checked"]),t(ee,{checked:e.audio,"onUpdate:checked":n[12]||(n[12]=y=>e.audio=y)},{default:l(()=>[...n[31]||(n[31]=[u("音频",-1)])]),_:1},8,["checked"])]),_:1})],64)):S("",!0),t(ue,{justify:"flex-end"},{default:l(()=>[t(A,{onClick:n[13]||(n[13]=y=>w.value=!1)},{default:l(()=>[...n[32]||(n[32]=[u("取消",-1)])]),_:1}),t(A,{type:"primary","html-type":"submit",class:"ml16px"},{default:l(()=>[u(le(v.value?"提交":"修改"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])}}},ol={class:"player-pro-live"},al={__name:"live",props:{background:{type:String,default:""},videoUrl:{type:String,default:""},watermark:{type:Object,default:()=>{}},isLogo:{type:Boolean,default:!0},muted:{type:Boolean,default:!1}},emits:["contextmenuClose","statsInfo"],setup(c,{emit:$}){const g=$,s=_(null),w=_(!0),b=_(null),v=c,k=()=>{var T=b.value;console.log(T);let p={MSE:!0,stretch:!1,isLogo:v.isLogo};s.value=new window.EasyPlayerPro(T,p),s.value.on("error",(j,o)=>{console.log("error:",j,o)}),s.value.on("timeout",()=>{C()}),s.value.on("delayTimeout",()=>{}),s.value.on("playbackEnd",()=>{}),s.value.on("liveEnd",()=>{g("contextmenuClose")}),s.value.on("recordEnd",j=>{}),s.value.on("play",()=>{}),s.value.on("contextmenuClose",()=>{g("contextmenuClose")}),s.value.on("stats",j=>{let o=j;o.videoPlaybackQuality=s.value.valueplayer.getVideoPlaybackQuality(),o.videoInfo=s.value.valueplayer.video&&s.value.valueplayer.video.videoInfo||{},o.audioInfo=s.value.valueplayer.audio&&s.value.valueplayer.audio.audioInfo||{},o.kbpsShow=s.value.valueplayer.control?s.value.valueplayer.control.kbpsShow:"0 KB/s",g("statsInfo",o)})},e=()=>{v.videoUrl!=""&&s.value&&s.value.play(v.videoUrl).then(()=>{}).catch(T=>{console.error("playerPro error:",T),setTimeout(()=>{C()},2e3)})},C=()=>{w.value=!1,D().then(()=>{w.value=!0,setTimeout(()=>{E().then(()=>{e()})},100)})},E=()=>new Promise((T,p)=>{k(),T()}),D=()=>new Promise((T,p)=>{P(),setTimeout(()=>{T()},100)}),P=()=>{s.value&&(s.value.destroy(),s.value=null)};return ne(()=>v.videoUrl,T=>{T==""?P():C()},{deep:!0}),Le(()=>{k(),v.videoUrl!=""&&e()}),ce(()=>{P()}),(T,p)=>(r(),R("div",ol,[w.value?(r(),R("div",{key:0,ref_key:"EasyplayerProRef",ref:b},null,512)):S("",!0)]))}},sl=ye(al,[["__scopeId","data-v-cb7f5da5"]]),ul=["src"],il={__name:"index",props:{imgUrl:{type:String,default:""}},emits:[""],setup(c,{emit:$}){const g=_(!1),s=c,w=()=>{g.value=!0};return ne(()=>s.videoUrl,b=>{},{deep:!0}),Le(()=>{}),ce(()=>{}),(b,v)=>{const k=fe;return r(),x(k,{class:"img-box cp",justify:"center",align:"center"},{default:l(()=>[g.value||c.imgUrl==""?(r(),x(k,{key:0,justify:"center",align:"center"},{default:l(()=>[t(L(Je))]),_:1})):(r(),R("img",{key:1,src:c.imgUrl,alt:"png",onError:v[0]||(v[0]=e=>w(e))},null,40,ul))]),_:1})}}},be=ye(il,[["__scopeId","data-v-478014c2"]]),rl={class:"flex items-center space-x-2"},pl={class:"flex items-center space-x-2"},dl={class:"flex items-center space-x-2"},vl={class:"flex items-center space-x-2"},fl={class:"flex items-center space-x-2"},ml={class:"flex items-center space-x-2"},cl={__name:"url",setup(c,{expose:$}){const g=_(!1),s=_({http_flv:"",http_hls:"",ws_flv:"",webrtc:"",rtmp:"",rtsp:""}),w=k=>{s.value=k,g.value=!0},b=()=>{g.value=!1},v=k=>{oe(k)};return $({open:w}),(k,e)=>{const C=ve,E=me,D=xe,P=ge,T=te;return r(),x(T,{open:g.value,"onUpdate:open":e[12]||(e[12]=p=>g.value=p),centered:"",title:"分发流地址",onCancel:b},{default:l(()=>[t(P,{layout:"vertical",model:s.value,class:"pt-2"},{default:l(()=>[t(D,{label:"HTTP-FLV"},{default:l(()=>[U("div",rl,[t(C,{value:s.value.http_flv,"onUpdate:value":e[0]||(e[0]=p=>s.value.http_flv=p),readonly:"",disabled:""},null,8,["value"]),t(E,{onClick:e[1]||(e[1]=p=>v(s.value.http_flv))},{default:l(()=>[...e[13]||(e[13]=[u("复制",-1)])]),_:1})])]),_:1}),t(D,{label:"HTTP-HLS"},{default:l(()=>[U("div",pl,[t(C,{value:s.value.http_hls,"onUpdate:value":e[2]||(e[2]=p=>s.value.http_hls=p),readonly:"",disabled:""},null,8,["value"]),t(E,{onClick:e[3]||(e[3]=p=>v(s.value.http_hls))},{default:l(()=>[...e[14]||(e[14]=[u("复制",-1)])]),_:1})])]),_:1}),t(D,{label:"WS-FLV"},{default:l(()=>[U("div",dl,[t(C,{value:s.value.ws_flv,"onUpdate:value":e[4]||(e[4]=p=>s.value.ws_flv=p),readonly:"",disabled:""},null,8,["value"]),t(E,{onClick:e[5]||(e[5]=p=>v(s.value.ws_flv))},{default:l(()=>[...e[15]||(e[15]=[u("复制",-1)])]),_:1})])]),_:1}),t(D,{label:"WebRTC"},{default:l(()=>[U("div",vl,[t(C,{value:s.value.webrtc,"onUpdate:value":e[6]||(e[6]=p=>s.value.webrtc=p),readonly:"",disabled:""},null,8,["value"]),t(E,{onClick:e[7]||(e[7]=p=>v(s.value.webrtc))},{default:l(()=>[...e[16]||(e[16]=[u("复制",-1)])]),_:1})])]),_:1}),t(D,{label:"RTMP"},{default:l(()=>[U("div",fl,[t(C,{value:s.value.rtmp,"onUpdate:value":e[8]||(e[8]=p=>s.value.rtmp=p),readonly:"",disabled:""},null,8,["value"]),t(E,{onClick:e[9]||(e[9]=p=>v(s.value.rtmp))},{default:l(()=>[...e[17]||(e[17]=[u("复制",-1)])]),_:1})])]),_:1}),t(D,{label:"RTSP"},{default:l(()=>[U("div",ml,[t(C,{value:s.value.rtsp,"onUpdate:value":e[10]||(e[10]=p=>s.value.rtsp=p),readonly:"",disabled:""},null,8,["value"]),t(E,{onClick:e[11]||(e[11]=p=>v(s.value.rtsp))},{default:l(()=>[...e[18]||(e[18]=[u("复制",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}},yl={class:"bg-white rounded-md cursor-pointer p-2 flex justify-between items-center"},_l={class:"bg-white rounded-md mt-5"},kl={class:"w300px h200px"},bl={class:"w60px h24px"},gl={class:"json-display"},xl={class:"pagination-box p10px"},wl={class:"h400px"},Cl={class:"ml16px"},Tl={class:"cp"},Ul={__name:"index",setup(c){const $=[{title:"ID",width:80,dataIndex:"id",key:"id",fixed:"left"},{title:"名称",width:160,dataIndex:"name",key:"name"},{title:"快照",align:"center",width:80,dataIndex:"snapURL",key:"snapURL"},{title:"状态",align:"center",width:80,dataIndex:"online",key:"online"},{title:"类型",align:"center",width:100,dataIndex:"liveType",key:"liveType"},{title:"启用",align:"center",width:80,dataIndex:"enable",key:"enable"},{title:"详情",align:"center",width:80,dataIndex:"info",key:"info"},{title:"地址",align:"center",width:100,dataIndex:"url",key:"url"},{title:"创建时间",align:"center",width:160,dataIndex:"created_at",key:"created_at"},{title:"操作",key:"operation",fixed:"right",align:"center",width:160}],g=_([]),s=_(null),w=_(null),b=_(null),v=_(null),k=_(!1),e=_(""),C=_(""),E=_(""),D=_(""),P=_([]),T=_({rtmp:"",rtsp:""}),p=_(""),j=_(""),o={current:1,pageSize:10,total:0,q:void 0,type:void 0},n=_(),Y=i=>{B.postPlayStart(i).then(a=>{const d=a.data.info,f={http_flv:d.http_flv,http_hls:d.http_hls,ws_flv:d.ws_flv,webrtc:d.webrtc,rtmp:d.rtmp,rtsp:d.rtsp};n.value.open(f)})},I=(i,a)=>{B.getLiveInfo(i.id).then(d=>{console.log(d)}),B.getStreamInfo(i.id).then(d=>{if(d.status==200){if(d.data.code==0){let f=d.data.data;if(f.pub&&f.pub.session_id==""&&delete f.pub,f.pull&&f.pull.session_id==""&&delete f.pull,f.subs&&f.subs.length>=1){let z=[];f.subs.forEach(F=>{F.session_id!=""&&z.push(F)}),f.subs=[...z]}else delete f.subs;D.value=JSON.stringify(f,null,2)}else D.value=JSON.stringify(d.data,null,2);a&&h.success({description:"刷新成功!"})}})},q=()=>{s.value=setInterval(()=>{N()},6e3)},Q=()=>{clearInterval(s.value),s.value!=null&&(s.value=null)},Z=()=>{j.value==""?o.type=void 0:o.type=j.value,N()},G=()=>{p.value==""?o.q=void 0:o.q=p.value,N()},ae=ll(()=>{G()},500);ne(()=>p.value,()=>{ae()});const W=i=>{C.value=i.value,E.value=i.key,!(i.value.includes("rtmp")||i.value.includes("rtsp"))&&(e.value=i.value)},se=i=>{if(i.enable==0){h.warning({description:"通道未启用!"});return}if(i.online==0){h.warning({description:"通道已离线!"});return}b.value=i.id,B.postPlayStart(b.value).then(a=>{if(a.status==200){k.value=!0;let d=a.data.info||{};P.value=[];let f="";for(const z in d){let F=d[z];switch(z){case"http_flv":f=F,E.value="HTTP-FLV",P.value.push({key:"HTTP-FLV",value:F});break;case"http_hls":P.value.push({key:"HTTP-HLS",value:F});break;case"ws_flv":P.value.push({key:"WS-FLV",value:F});break;case"webrtc":P.value.push({key:"WEBRTC",value:F});break;case"rtsp":P.value.push({key:"RTSP",value:F});break}}f!=""&&(C.value=f,e.value=f)}}),i.liveType=="pull"&&i.onDemand&&ee()},ee=()=>{w.value=setInterval(()=>{B.postPlayStart(b.value)},15e3)},A=()=>{clearInterval(w.value),w.value!=null&&(w.value=null)},ue=()=>{v.value&&v.value.setOpen(null)},ie=i=>{v.value&&v.value.setOpen(i)},re=(i,a)=>{let d="",f=null;switch(i){case"enable":d="enable",f=a.enable?1:0;break;case"onDemand":d="onDemand",f=a.onDemand?1:0;break;case"audio":d="audio",f=a.audio?1:0;break}if(d==""||f==null){h.error({description:"参数异常!"});return}B.putLiveOne(a.liveType,a.id,d,f).then(z=>{z.status==200&&(N(),h.success({description:"更新成功!"}))})},y=()=>{A()};ne(()=>k.value,i=>{i==!1&&A()},{deep:!0});const Pe=()=>{N(),v.value&&v.value.setClose()},Ie=i=>{te.confirm({title:`确定要删除 “${i.name}” 吗?`,icon:t(Ye),okText:"确定",okType:"danger",cancelText:"取消",onOk(){B.deleteLive(i.id).then(a=>{a.status==200&&(h.success({description:"删除成功!"}),N())})},onCancel(){}})},N=()=>{B.getLiveList({page:o.current,size:o.pageSize,type:o.type,q:o.q}).then(i=>{i.status==200&&(o.total=i.data.total,g.value=i.data.items,T.value.rtmp=i.data.rtmp,T.value.rtsp=i.data.rtsp)}).catch(i=>{})},Oe=i=>{o.current=i,N()};return N(),q(),ce(()=>{Q(),A()}),(i,a)=>{const d=me,f=Se,z=Ue,F=Ae,Ee=We,J=fe,K=Te,De=we,pe=Ce,Re=He,je=Ne,Fe=ve,Be=te;return r(),R(H,null,[U("div",yl,[U("div",null,[t(d,{type:"primary",onClick:ue},{icon:l(()=>[t(L(Qe))]),default:l(()=>[a[8]||(a[8]=u(" 创建直播 ",-1))]),_:1})]),t(J,{justify:"flex-end"},{default:l(()=>[t(Ee,null,{default:l(()=>[t(z,{value:j.value,"onUpdate:value":a[0]||(a[0]=m=>j.value=m),style:{width:"80px"},onChange:Z},{default:l(()=>[t(f,{value:""},{default:l(()=>[...a[9]||(a[9]=[u("全部",-1)])]),_:1}),t(f,{value:"pull"},{default:l(()=>[...a[10]||(a[10]=[u("拉流",-1)])]),_:1}),t(f,{value:"push"},{default:l(()=>[...a[11]||(a[11]=[u("推流",-1)])]),_:1})]),_:1},8,["value"]),t(F,{value:p.value,"onUpdate:value":a[1]||(a[1]=m=>p.value=m),placeholder:"请输入关键字...",class:"w-68","enter-button":"",onSearch:G},null,8,["value"])]),_:1})]),_:1})]),U("div",_l,[t(Re,{columns:$,"data-source":g.value,pagination:!1,scroll:{x:1200}},{bodyCell:l(({column:m,text:X,record:O})=>[m.key==="operation"?(r(),R(H,{key:0},[t(d,{type:"primary",shape:"circle",class:"mr5px",onClick:V=>se(X)},{default:l(()=>[t(L(_e))]),_:1},8,["onClick"]),t(d,{type:"primary",shape:"circle",class:"mr5px ml5px",onClick:V=>ie(X)},{default:l(()=>[t(L(Ze))]),_:1},8,["onClick"]),t(d,{type:"primary",danger:"",shape:"circle",class:"ml5px",onClick:V=>Ie(X)},{default:l(()=>[t(L(Ke))]),_:1},8,["onClick"])],64)):S("",!0),m.key==="liveType"?(r(),R(H,{key:1},[O.liveType=="pull"?(r(),x(K,{key:0,class:"mr0px",color:"success"},{default:l(()=>[...a[12]||(a[12]=[u("拉流",-1)])]),_:1})):O.liveType=="push"?(r(),x(K,{key:1,class:"mr0px",color:"warning"},{default:l(()=>[...a[13]||(a[13]=[u("推流",-1)])]),_:1})):S("",!0)],64)):S("",!0),m.key==="online"?(r(),R(H,{key:2},[O.online==1?(r(),x(K,{key:0,class:"mr0px",color:"success"},{default:l(()=>[...a[14]||(a[14]=[u("在线",-1)])]),_:1})):O.online==2?(r(),x(K,{key:1,class:"mr0px",color:"success"},{default:l(()=>[...a[15]||(a[15]=[u("直播中",-1)])]),_:1})):(r(),x(K,{key:2,class:"mr0px",color:"default"},{default:l(()=>[...a[16]||(a[16]=[u("离线",-1)])]),_:1}))],64)):S("",!0),m.key==="url"?(r(),x(d,{key:3,size:"small",onClick:V=>Y(O.id)},{default:l(()=>[...a[17]||(a[17]=[u("查看流地址",-1)])]),_:1},8,["onClick"])):S("",!0),m.key==="enable"?(r(),x(De,{key:4,checked:O.enable,"onUpdate:checked":V=>O.enable=V,onChange:V=>re("enable",O)},null,8,["checked","onUpdate:checked","onChange"])):S("",!0),m.key==="snapURL"?(r(),x(J,{key:5,justify:"center"},{default:l(()=>[t(pe,{placement:"left"},{content:l(()=>[U("div",kl,[t(be,{"img-url":O.snapURL},null,8,["img-url"])])]),title:l(()=>[...a[18]||(a[18]=[])]),default:l(()=>[U("div",bl,[t(be,{"img-url":O.snapURL},null,8,["img-url"])])]),_:2},1024)]),_:2},1024)):S("",!0),m.key==="info"?(r(),x(J,{key:6,justify:"center"},{default:l(()=>[t(pe,{placement:"left"},{content:l(()=>[U("pre",gl,le(D.value),1)]),title:l(()=>[t(J,{justify:"space-between"},{default:l(()=>[a[19]||(a[19]=U("span",null,"视频流详情",-1)),t(L($e),{class:"cp",onClick:V=>I(O,!0)},null,8,["onClick"])]),_:2},1024)]),default:l(()=>[t(d,{size:"small",class:"mr0px cp",onMouseover:V=>I(O,!1),onClick:V=>I(O,!0)},{default:l(()=>[...a[20]||(a[20]=[u("详情",-1)])]),_:1},8,["onMouseover","onClick"])]),_:2},1024)]),_:2},1024)):S("",!0)]),_:1},8,["data-source"]),U("div",xl,[t(je,{current:o.current,"onUpdate:current":a[2]||(a[2]=m=>o.current=m),pageSize:o.pageSize,"onUpdate:pageSize":a[3]||(a[3]=m=>o.pageSize=m),size:i.small,onChange:Oe,total:o.total,"show-total":m=>`共 ${m} 项`,"show-less-items":""},null,8,["current","pageSize","size","total","show-total"])]),t(nl,{ref_key:"LiveFormRef",ref:v,onOk:Pe},null,512),t(Be,{open:k.value,"onUpdate:open":a[7]||(a[7]=m=>k.value=m),title:"直播",width:"760px",onClose:y},{footer:l(()=>[t(J,{justify:"flex-end"},{default:l(()=>[t(Fe,{value:C.value,"onUpdate:value":a[5]||(a[5]=m=>C.value=m),disabled:""},{addonBefore:l(()=>[t(pe,{placement:"right"},{content:l(()=>[(r(!0),R(H,null,el(P.value,(m,X)=>(r(),x(J,{justify:"space-between",class:"cp m14px",key:X},{default:l(()=>[U("span",null,le(m.key),1),U("div",Cl,[m.key!="RTMP"&&m.key!="RTSP"?(r(),x(L(_e),{key:0,style:{color:"#0cbb92"},onClick:O=>W(m)},null,8,["onClick"])):S("",!0),t(L(de),{class:"ml16px",style:{color:"#0cbb92"},onClick:O=>L(oe)(m.value)},null,8,["onClick"])])]),_:2},1024))),128))]),title:l(()=>[...a[21]||(a[21]=[])]),default:l(()=>[U("span",Tl,[u(le(E.value)+" ",1),t(L(Xe))])]),_:1})]),addonAfter:l(()=>[t(L(de),{class:"cp",onClick:a[4]||(a[4]=m=>L(oe)(C.value))})]),_:1},8,["value"]),t(d,{onClick:a[6]||(a[6]=m=>k.value=!1),class:"ml16px"},{default:l(()=>[...a[22]||(a[22]=[u("关闭",-1)])]),_:1})]),_:1})]),default:l(()=>[U("div",wl,[k.value?(r(),x(sl,{key:0,videoUrl:e.value},null,8,["videoUrl"])):S("",!0)])]),_:1},8,["open"]),t(cl,{ref_key:"urlModalRef",ref:n},null,512)])],64)}}},at=ye(Ul,[["__scopeId","data-v-1c6fd126"]]);export{at as default};
