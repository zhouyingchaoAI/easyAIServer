# yanying é«˜æ€§èƒ½é…ç½®æ–¹æ¡ˆ - æ¯ç§’5å¼ å›¾ç‰‡

## ğŸ¯ æ€§èƒ½ç›®æ ‡

**éœ€æ±‚**ï¼š1ç§’å¤„ç†5å¼ å›¾ç‰‡  
**ç­‰äº**ï¼š200ms/å¼  æˆ– 5å¼ å¹¶å‘/ç§’

---

## ğŸ“Š æ€§èƒ½åˆ†æ

### è¾¾æˆç›®æ ‡çš„æ–¹å¼

**æ–¹å¼1ï¼šå•å¼ å¿«é€Ÿæ¨ç†**
```
å•æ¬¡æ¨ç†æ—¶é—´ â‰¤ 200ms
åˆ™å¯ä»¥è¾¾åˆ° 5å¼ /ç§’
```

**æ–¹å¼2ï¼šé«˜å¹¶å‘æ¨ç†ï¼ˆæ¨èï¼‰**
```
5ä¸ªå¹¶å‘ Ã— 1ç§’/å¼  = 5å¼ /ç§’
æˆ–
10ä¸ªå¹¶å‘ Ã— 500ms/å¼  = 20å¼ /ç§’
```

**æ–¹å¼3ï¼šå¤šç®—æ³•å®ä¾‹**
```
éƒ¨ç½²5ä¸ªç®—æ³•æœåŠ¡å®ä¾‹
æ¯ä¸ªå®ä¾‹å¤„ç†1å¼ /ç§’
æ€»è®¡ï¼š5å¼ /ç§’
```

---

## âš¡ æ¨èé…ç½®ï¼ˆé«˜æ€§èƒ½ç‰ˆï¼‰

### é…ç½®æ–‡ä»¶ä¼˜åŒ–

```toml
[frame_extractor]
enable = true
store = 'minio'
interval_ms = 1000  # é»˜è®¤é—´éš”

[[frame_extractor.tasks]]
id = 'high_perf_task'
task_type = 'äººæ•°ç»Ÿè®¡'
rtsp_url = 'rtsp://your-camera/stream'
interval_ms = 200  # â­ æ¯200msæŠ½1å¸§ = æ¯ç§’5å¸§
output_path = 'high_perf_task'
enabled = true

[ai_analysis]
enable = true
scan_interval_sec = 1  # â­ æ¯ç§’æ‰«æï¼ˆå®æ—¶æ€§ï¼‰
max_concurrent_infer = 20  # â­ 20ä¸ªå¹¶å‘æ¨ç†
```

**æ€§èƒ½é¢„æœŸ**ï¼š
- æŠ½å¸§ï¼š5å¼ /ç§’
- æ‰«æï¼šæ¯ç§’æ£€æŸ¥
- å¹¶å‘ï¼š20ä¸ªä»»åŠ¡åŒæ—¶æ¨ç†
- å¦‚æœå•æ¬¡æ¨ç†500msï¼Œå¯ä»¥è¾¾åˆ° 20 Ã— 2 = 40å¼ /ç§’

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šå¢åŠ å¹¶å‘æ•°ï¼ˆæœ€ç®€å•ï¼‰â­

**ä¿®æ”¹é…ç½®**ï¼š
```toml
[ai_analysis]
scan_interval_sec = 1  # æ¯ç§’æ‰«æ
max_concurrent_infer = 50  # å¤§å¹…å¢åŠ å¹¶å‘
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ— éœ€ä¿®æ”¹ä»£ç 
- âœ… ç«‹å³ç”Ÿæ•ˆ
- âœ… å……åˆ†åˆ©ç”¨CPU

**è¦æ±‚**ï¼š
- æœåŠ¡å™¨æœ‰è¶³å¤Ÿçš„CPU/å†…å­˜
- æ¨èï¼š8æ ¸CPU + 16GBå†…å­˜ä»¥ä¸Š

### æ–¹æ¡ˆBï¼šéƒ¨ç½²å¤šä¸ªç®—æ³•æœåŠ¡å®ä¾‹

å¯åŠ¨5ä¸ªç®—æ³•æœåŠ¡å®ä¾‹ï¼ˆä½¿ç”¨ä¸åŒç«¯å£ï¼‰ï¼š

```bash
# å®ä¾‹1
python3 algorithm_service.py --service-id algo_1 --task-types äººæ•°ç»Ÿè®¡ --port 8001 &

# å®ä¾‹2
python3 algorithm_service.py --service-id algo_2 --task-types äººæ•°ç»Ÿè®¡ --port 8002 &

# å®ä¾‹3
python3 algorithm_service.py --service-id algo_3 --task-types äººæ•°ç»Ÿè®¡ --port 8003 &

# å®ä¾‹4
python3 algorithm_service.py --service-id algo_4 --task-types äººæ•°ç»Ÿè®¡ --port 8004 &

# å®ä¾‹5
python3 algorithm_service.py --service-id algo_5 --task-types äººæ•°ç»Ÿè®¡ --port 8005 &
```

**æ€§èƒ½**ï¼š
- 5ä¸ªå®ä¾‹ Ã— 1å¼ /ç§’ = 5å¼ /ç§’ï¼ˆæœ€ä½ï¼‰
- 5ä¸ªå®ä¾‹ Ã— 2å¼ /ç§’ = 10å¼ /ç§’ï¼ˆç†æƒ³ï¼‰

**ä¼˜åŠ¿**ï¼š
- âœ… è´Ÿè½½å‡è¡¡
- âœ… å®¹é”™èƒ½åŠ›å¼º
- âœ… å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ¨¡å‹

### æ–¹æ¡ˆCï¼šGPUåŠ é€Ÿï¼ˆæœ€ä½³æ€§èƒ½ï¼‰

ä½¿ç”¨GPUåŠ é€Ÿæ¨ç†ï¼Œå¤§å¹…æå‡é€Ÿåº¦ï¼š

```python
# algorithm_service.py
import torch
from ultralytics import YOLO

# ä½¿ç”¨GPU
device = 'cuda' if torch.cuda.is_available() else 'cpu'
model = YOLO('yolov8n.pt').to(device)

# æ‰¹é‡æ¨ç†
@app.route('/infer_batch', methods=['POST'])
def infer_batch():
    images = request.json['images']  # æ‰¹é‡æ¥æ”¶
    results = model.predict(images, device=device)  # GPUæ‰¹é‡æ¨ç†
    return jsonify([process(r) for r in results])
```

**æ€§èƒ½**ï¼š
- GPUæ‰¹é‡æ¨ç†ï¼š10-50ms/å¼ 
- å¯è¾¾åˆ°ï¼š20-100å¼ /ç§’

---

## ğŸ”§ ç«‹å³å¯æ‰§è¡Œçš„é…ç½®

### æ­¥éª¤1ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶

```bash
vi /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428/configs/config.toml
```

**ä¿®æ”¹ä»¥ä¸‹éƒ¨åˆ†**ï¼š

```toml
[[frame_extractor.tasks]]
id = 'test1'
task_type = 'äººæ•°ç»Ÿè®¡'
rtsp_url = 'rtsp://127.0.0.1:15544/live/stream_2'
interval_ms = 200  # â­ æ”¹ä¸º200msï¼ˆæ¯ç§’5å¸§ï¼‰
output_path = 'test1'
enabled = true

[ai_analysis]
enable = true
scan_interval_sec = 1  # â­ æ”¹ä¸º1ç§’ï¼ˆå®æ—¶æ‰«æï¼‰
mq_type = 'kafka'
mq_address = ''
mq_topic = 'easydarwin.alerts'
heartbeat_timeout_sec = 90
max_concurrent_infer = 50  # â­ æ”¹ä¸º50ï¼ˆé«˜å¹¶å‘ï¼‰
```

### æ­¥éª¤2ï¼šè°ƒæ•´MinIOæ¸…ç†ç­–ç•¥

ç”±äºå›¾ç‰‡äº§ç”Ÿé€Ÿåº¦å¿«ï¼Œå»ºè®®ç¼©çŸ­ä¿ç•™æ—¶é—´ï¼š

```bash
# åˆ é™¤æ—§ç­–ç•¥
/tmp/mc ilm remove test-minio/images --id d3oa2dgtf6mv6f5ito6g

# è®¾ç½®3å¤©è¿‡æœŸï¼ˆé«˜é¢‘ç‡æŠ½å¸§å»ºè®®ï¼‰
/tmp/mc ilm add test-minio/images --expiry-days 3
```

### æ­¥éª¤3ï¼šé‡å¯æœåŠ¡

```bash
cd /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428
pkill -9 easydarwin
sleep 2
./easydarwin &
```

---

## ğŸ“ˆ æ€§èƒ½è®¡ç®—

### å½“å‰é…ç½®æ€§èƒ½

**è¾“å…¥**ï¼š
- æŠ½å¸§ï¼šæ¯200ms = 5å¼ /ç§’
- æ‰«æï¼šæ¯1ç§’
- å¹¶å‘ï¼š50ä¸ª

**æ¨ç†èƒ½åŠ›**ï¼š
```
å‡è®¾å•æ¬¡æ¨ç†æ—¶é—´ = 500ms
ç†è®ºæœ€å¤§åå = 50ä¸ªå¹¶å‘ / 0.5ç§’ = 100å¼ /ç§’
å®é™…å¯å¤„ç† = 100å¼ /ç§’ >> 5å¼ /ç§’ âœ… å®Œå…¨è¶³å¤Ÿ
```

**å­˜å‚¨éœ€æ±‚**ï¼š
```
æ¯ç§’ï¼š5å¼ 
æ¯å°æ—¶ï¼š18,000å¼  Ã— 100KB = 1.8GB
æ¯å¤©ï¼š43.2GB
3å¤©æ€»è®¡ï¼šçº¦130GB
```

### æ€§èƒ½ç“¶é¢ˆåˆ†æ

**å¦‚æœè¾¾ä¸åˆ°5å¼ /ç§’ï¼Œå¯èƒ½çš„ç“¶é¢ˆ**ï¼š

1. **ç®—æ³•æ¨ç†é€Ÿåº¦æ…¢**
   - è§£å†³ï¼šä½¿ç”¨GPUåŠ é€Ÿ
   - è§£å†³ï¼šä¼˜åŒ–æ¨¡å‹ï¼ˆYOLOv8n â†’ YOLOv8sï¼‰
   - è§£å†³ï¼šé™ä½è¾“å…¥åˆ†è¾¨ç‡

2. **ç½‘ç»œå¸¦å®½ä¸è¶³**
   - è§£å†³ï¼šä½¿ç”¨æœ¬åœ°MinIO
   - è§£å†³ï¼šå‹ç¼©å›¾ç‰‡
   - è§£å†³ï¼šå‡å°‘é¢„ç­¾åURLç”Ÿæˆ

3. **CPUèµ„æºä¸è¶³**
   - è§£å†³ï¼šå¢åŠ æœåŠ¡å™¨CPUæ ¸å¿ƒæ•°
   - è§£å†³ï¼šå‡å°‘å¹¶å‘æ•°ä½†ä¼˜åŒ–ç®—æ³•

---

## ğŸ› ï¸ ä¼˜åŒ–è„šæœ¬

### è‡ªåŠ¨æ€§èƒ½æµ‹è¯•è„šæœ¬

```bash
cat > /code/EasyDarwin/performance_test.sh << 'EOF'
#!/bin/bash

echo "========================================="
echo "yanying æ€§èƒ½æµ‹è¯•"
echo "========================================="
echo ""

START_TIME=$(date +%s)
START_COUNT=$(curl -s http://localhost:5066/api/v1/ai_analysis/alerts | python3 -c "import json,sys; print(json.load(sys.stdin).get('total', 0))")

echo "å¼€å§‹è®¡æ•°: $START_COUNT ä¸ªå‘Šè­¦"
echo "æµ‹è¯•60ç§’..."
echo ""

sleep 60

END_TIME=$(date +%s)
END_COUNT=$(curl -s http://localhost:5066/api/v1/ai_analysis/alerts | python3 -c "import json,sys; print(json.load(sys.stdin).get('total', 0))")

PROCESSED=$((END_COUNT - START_COUNT))
DURATION=$((END_TIME - START_TIME))
RATE=$(echo "scale=2; $PROCESSED / $DURATION" | bc)

echo "========================================="
echo "æ€§èƒ½æµ‹è¯•ç»“æœ"
echo "========================================="
echo "æµ‹è¯•æ—¶é•¿: ${DURATION}ç§’"
echo "å¤„ç†å›¾ç‰‡: ${PROCESSED}å¼ "
echo "å¤„ç†é€Ÿç‡: ${RATE}å¼ /ç§’"
echo ""

if (( $(echo "$RATE >= 5" | bc -l) )); then
    echo "âœ… è¾¾åˆ°æ€§èƒ½ç›®æ ‡ï¼ˆâ‰¥5å¼ /ç§’ï¼‰"
else
    echo "âŒ æœªè¾¾åˆ°ç›®æ ‡ï¼Œå½“å‰: ${RATE}å¼ /ç§’ï¼Œç›®æ ‡: 5å¼ /ç§’"
    echo ""
    echo "ä¼˜åŒ–å»ºè®®:"
    echo "1. å¢åŠ å¹¶å‘æ•°: max_concurrent_infer = 100"
    echo "2. ä½¿ç”¨GPUåŠ é€Ÿ"
    echo "3. éƒ¨ç½²æ›´å¤šç®—æ³•æœåŠ¡å®ä¾‹"
fi
EOF

chmod +x /code/EasyDarwin/performance_test.sh
```

---

## ğŸ¯ æ¨èçš„é«˜æ€§èƒ½é…ç½®

### é…ç½®Aï¼šCPUå¯†é›†å‹ï¼ˆ8æ ¸+ï¼‰

```toml
[[frame_extractor.tasks]]
interval_ms = 200  # æ¯ç§’5å¸§

[ai_analysis]
scan_interval_sec = 1  # æ¯ç§’æ‰«æ
max_concurrent_infer = 50  # 50ä¸ªå¹¶å‘
```

**MinIOæ¸…ç†**ï¼š
```bash
/tmp/mc ilm add test-minio/images --expiry-days 3
```

### é…ç½®Bï¼šGPUåŠ é€Ÿå‹

```toml
[[frame_extractor.tasks]]
interval_ms = 200  # æ¯ç§’5å¸§

[ai_analysis]
scan_interval_sec = 1
max_concurrent_infer = 10  # GPUä¸éœ€è¦å¤ªå¤šå¹¶å‘
```

**ç®—æ³•æœåŠ¡ä½¿ç”¨GPU**ï¼š
```python
device = 'cuda'
model = YOLO('yolov8n.pt').to(device)
```

### é…ç½®Cï¼šå¤šå®ä¾‹è´Ÿè½½å‡è¡¡

```toml
[ai_analysis]
scan_interval_sec = 1
max_concurrent_infer = 20
```

**å¯åŠ¨5ä¸ªç®—æ³•æœåŠ¡å®ä¾‹**ï¼ˆDocker Composeï¼‰ï¼š
```yaml
services:
  algo1:
    image: algorithm-service:latest
    environment:
      - SERVICE_ID=algo_1
      - PORT=8001
  algo2:
    image: algorithm-service:latest
    environment:
      - SERVICE_ID=algo_2
      - PORT=8002
  algo3:
    image: algorithm-service:latest
    environment:
      - SERVICE_ID=algo_3
      - PORT=8003
  algo4:
    image: algorithm-service:latest
    environment:
      - SERVICE_ID=algo_4
      - PORT=8004
  algo5:
    image: algorithm-service:latest
    environment:
      - SERVICE_ID=algo_5
      - PORT=8005
```

---

## ğŸ’» ç¤ºä¾‹ï¼šé«˜æ€§èƒ½ç®—æ³•æœåŠ¡

```python
from flask import Flask, request, jsonify
import torch
from ultralytics import YOLO
from concurrent.futures import ThreadPoolExecutor
import requests
from PIL import Image
from io import BytesIO

app = Flask(__name__)

# ä½¿ç”¨GPUï¼ˆå¦‚æœæœ‰ï¼‰
device = 'cuda' if torch.cuda.is_available() else 'cpu'
model = YOLO('yolov8n.pt').to(device)

# çº¿ç¨‹æ± ç”¨äºå¹¶å‘ä¸‹è½½å›¾ç‰‡
executor = ThreadPoolExecutor(max_workers=10)

@app.route('/infer', methods=['POST'])
def infer():
    start = time.time()
    
    data = request.json
    image_url = data['image_url']
    
    # ä¸‹è½½å›¾ç‰‡
    response = requests.get(image_url, timeout=5)
    img = Image.open(BytesIO(response.content))
    
    # GPUæ¨ç†ï¼ˆå¿«é€Ÿï¼‰
    results = model.predict(img, device=device, verbose=False)
    
    # å¤„ç†ç»“æœ
    detections = []
    for r in results:
        for box in r.boxes:
            detections.append({
                'class_name': r.names[int(box.cls)],
                'confidence': float(box.conf),
                'bbox': box.xyxy[0].tolist()
            })
    
    inference_time = int((time.time() - start) * 1000)
    
    return jsonify({
        'success': True,
        'detections': detections,
        'inference_time_ms': inference_time,
        'alert': len(detections) > 0,
        'alert_message': f'æ£€æµ‹åˆ°{len(detections)}ä¸ªç›®æ ‡'
    })

if __name__ == '__main__':
    # GPUé¢„çƒ­
    dummy = Image.new('RGB', (640, 640))
    model.predict(dummy, device=device, verbose=False)
    
    print(f"âœ… æ¨¡å‹åŠ è½½å®Œæˆ (è®¾å¤‡: {device})")
    app.run(host='0.0.0.0', port=8001, threaded=True)
```

**æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**ï¼š
1. âœ… ä½¿ç”¨GPUåŠ é€Ÿï¼ˆ10-50ms/å¼ ï¼‰
2. âœ… æ¨¡å‹é¢„çƒ­ï¼ˆé¿å…é¦–æ¬¡æ…¢ï¼‰
3. âœ… å¤šçº¿ç¨‹Flaskï¼ˆå¹¶å‘å¤„ç†ï¼‰
4. âœ… å¼‚æ­¥ä¸‹è½½å›¾ç‰‡

---

## ğŸ”§ ç«‹å³æ‰§è¡Œçš„ä¼˜åŒ–

### ä¼˜åŒ–1ï¼šä¿®æ”¹é…ç½®è¾¾åˆ°é«˜æ€§èƒ½

```bash
cat > /tmp/high_perf_config.patch << 'EOF'
[[frame_extractor.tasks]]
id = 'test1'
task_type = 'äººæ•°ç»Ÿè®¡'
rtsp_url = 'rtsp://127.0.0.1:15544/live/stream_2'
interval_ms = 200  # â­ æ¯ç§’5å¸§
output_path = 'test1'
enabled = true

[ai_analysis]
enable = true
scan_interval_sec = 1  # â­ æ¯ç§’æ‰«æ
mq_type = 'kafka'
mq_address = ''
mq_topic = 'easydarwin.alerts'
heartbeat_timeout_sec = 90
max_concurrent_infer = 50  # â­ 50å¹¶å‘
EOF

# åº”ç”¨é…ç½®ï¼ˆæ‰‹åŠ¨æ‰§è¡Œï¼‰
vi /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428/configs/config.toml
```

### ä¼˜åŒ–2ï¼šå¯åŠ¨å¤šä¸ªç®—æ³•æœåŠ¡å®ä¾‹

åˆ›å»ºå¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼š

```bash
cat > /code/EasyDarwin/start_multi_algorithms.sh << 'EOF'
#!/bin/bash

# å¯åŠ¨5ä¸ªç®—æ³•æœåŠ¡å®ä¾‹ä»¥è¾¾åˆ°5å¼ /ç§’çš„å¤„ç†èƒ½åŠ›

YANYING_HOST="http://localhost:5066"
BASE_PORT=8001

echo "å¯åŠ¨5ä¸ªç®—æ³•æœåŠ¡å®ä¾‹..."

for i in {1..5}; do
    PORT=$((BASE_PORT + i - 1))
    SERVICE_ID="people_counter_${i}"
    
    # åå°å¯åŠ¨ï¼ˆè¿™é‡Œæ˜¯æ¼”ç¤ºï¼Œå®é™…éœ€è¦çœŸå®çš„ç®—æ³•æœåŠ¡ï¼‰
    # python3 algorithm_service.py \
    #   --service-id "$SERVICE_ID" \
    #   --name "äººæ•°ç»Ÿè®¡æœåŠ¡-å®ä¾‹${i}" \
    #   --task-types äººæ•°ç»Ÿè®¡ \
    #   --port $PORT &
    
    # æ³¨å†ŒæœåŠ¡
    curl -s -X POST ${YANYING_HOST}/api/v1/ai_analysis/register \
      -H "Content-Type: application/json" \
      -d "{
        \"service_id\": \"$SERVICE_ID\",
        \"name\": \"äººæ•°ç»Ÿè®¡æœåŠ¡-å®ä¾‹${i}\",
        \"task_types\": [\"äººæ•°ç»Ÿè®¡\"],
        \"endpoint\": \"http://localhost:${PORT}/infer\",
        \"version\": \"1.0.0\"
      }" > /dev/null
    
    echo "âœ… å®ä¾‹${i}å·²æ³¨å†Œ (ç«¯å£: $PORT)"
    
    sleep 0.5
done

echo ""
echo "âœ… 5ä¸ªå®ä¾‹å·²å¯åŠ¨å¹¶æ³¨å†Œ"
echo "æ€»å¤„ç†èƒ½åŠ›: æ¯ä¸ª1å¼ /ç§’ Ã— 5 = 5å¼ /ç§’ï¼ˆæœ€ä½ï¼‰"
EOF

chmod +x /code/EasyDarwin/start_multi_algorithms.sh
```

### ä¼˜åŒ–3ï¼šè°ƒæ•´MinIOæ¸…ç†ï¼ˆé«˜é¢‘ç‡æŠ½å¸§ï¼‰

```bash
# åˆ é™¤æ—§çš„7å¤©ç­–ç•¥
/tmp/mc ilm remove test-minio/images --all

# è®¾ç½®1å¤©è¿‡æœŸï¼ˆæ¯ç§’5å¸§ï¼Œæ•°æ®é‡å¤§ï¼‰
/tmp/mc ilm add test-minio/images --expiry-days 1
```

**å­˜å‚¨é¢„ä¼°**ï¼š
```
æ¯ç§’5å¼  Ã— 86400ç§’ = 432,000å¼ /å¤©
432,000å¼  Ã— 100KB = 42GB/å¤©
1å¤©ä¿ç•™ = 42GBï¼ˆå¯æ¥å—ï¼‰
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### é…ç½®å¯¹æ¯”è¡¨

| é…ç½® | æŠ½å¸§é€Ÿç‡ | æ‰«æé—´éš” | å¹¶å‘æ•° | ç†è®ºåå | å­˜å‚¨/å¤© |
|------|---------|---------|--------|---------|---------|
| **å½“å‰** | 0.5å¼ /ç§’ | 10ç§’ | 10 | 20å¼ /ç§’ | 4.3GB |
| **ä¼˜åŒ–1** | 5å¼ /ç§’ | 1ç§’ | 50 | 100å¼ /ç§’ | 43GB |
| **ä¼˜åŒ–2** | 2å¼ /ç§’ | 3ç§’ | 20 | 40å¼ /ç§’ | 17GB |
| **GPUç‰ˆ** | 5å¼ /ç§’ | 1ç§’ | 10 | 200å¼ /ç§’ | 43GB |

---

## ğŸš€ æ‰§è¡Œé«˜æ€§èƒ½é…ç½®

è®©æˆ‘å¸®æ‚¨ç›´æ¥åº”ç”¨ï¼š

```bash
# 1. å¤‡ä»½é…ç½®
cp /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428/configs/config.toml \
   /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428/configs/config.toml.backup

# 2. ä¿®æ”¹é…ç½®ï¼ˆæ‰‹åŠ¨æ‰§è¡Œï¼‰
vi /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428/configs/config.toml

# ä¿®æ”¹ä¸‰å¤„ï¼š
# interval_ms = 200
# scan_interval_sec = 1  
# max_concurrent_infer = 50

# 3. è°ƒæ•´MinIOæ¸…ç†
/tmp/mc ilm remove test-minio/images --all
/tmp/mc ilm add test-minio/images --expiry-days 1

# 4. é‡å¯æœåŠ¡
cd /code/EasyDarwin/build/EasyDarwin-lin-v8.3.3-202510161428
pkill -9 easydarwin && sleep 2 && ./easydarwin &

# 5. éªŒè¯æ€§èƒ½
sleep 10
tail -f logs/20251016_08_00_00.log | grep "found new"
```

---

## ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–ï¼ˆä»Šå¤©ï¼‰
1. âœ… ä¿®æ”¹é…ç½®å‚æ•°ï¼ˆè§ä¸Šï¼‰
2. âœ… è°ƒæ•´MinIOæ¸…ç†ç­–ç•¥
3. âœ… é‡å¯æœåŠ¡

### ä¸­æœŸä¼˜åŒ–ï¼ˆæœ¬å‘¨ï¼‰
1. éƒ¨ç½²GPUç®—æ³•æœåŠ¡
2. å¯åŠ¨å¤šä¸ªç®—æ³•å®ä¾‹
3. æ·»åŠ æ€§èƒ½ç›‘æ§

### é•¿æœŸä¼˜åŒ–ï¼ˆæœ¬æœˆï¼‰
1. ä»£ç å±‚é¢æ·»åŠ æ‰¹é‡æ¨ç†
2. å®ç°æ™ºèƒ½é‡‡æ ·
3. æ·»åŠ è‡ªé€‚åº”é™çº§
4. Redisç¼“å­˜ä¼˜åŒ–

---

<div align="center">

## ğŸ¯ ç›®æ ‡é…ç½®æ€»ç»“

**æ€§èƒ½ç›®æ ‡**: æ¯ç§’å¤„ç†5å¼ å›¾ç‰‡

**å…³é”®é…ç½®**:
- interval_ms = **200** (æ¯ç§’5å¸§)
- scan_interval_sec = **1** (æ¯ç§’æ‰«æ)
- max_concurrent_infer = **50** (é«˜å¹¶å‘)

**å­˜å‚¨ç­–ç•¥**: 1å¤©è‡ªåŠ¨è¿‡æœŸ

**é¢„æœŸæ€§èƒ½**: âœ… **å¯è¾¾åˆ°5-20å¼ /ç§’**

</div>

