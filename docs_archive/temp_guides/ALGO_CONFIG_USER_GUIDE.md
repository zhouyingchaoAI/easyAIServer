# ç®—æ³•é…ç½®åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ“š yanyingæ™ºèƒ½è§†é¢‘åˆ†æå¹³å° - ç®—æ³•é…ç½®ä½¿ç”¨æ‰‹å†Œ

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2024-10-17

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æœ¬åŠŸèƒ½å…è®¸æ‚¨åœ¨Webç•Œé¢ä¸Šä¸ºæ¯ä¸ªæŠ½å¸§ä»»åŠ¡é…ç½®ç®—æ³•å‚æ•°ï¼š
- âœ… ç»˜åˆ¶æ£€æµ‹åŒºåŸŸï¼ˆçº¿ã€çŸ©å½¢ã€å¤šè¾¹å½¢ï¼‰
- âœ… é…ç½®å¤šä¸ªåˆ†æåŒºåŸŸ
- âœ… è®¾ç½®ç®—æ³•å‚æ•°ï¼ˆç½®ä¿¡åº¦ã€IOUç­‰ï¼‰
- âœ… é…ç½®ä¿å­˜åˆ°MinIOï¼Œè‡ªåŠ¨ä¼ é€’ç»™ç®—æ³•æœåŠ¡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: æ·»åŠ æŠ½å¸§ä»»åŠ¡

1. è®¿é—® `http://localhost:5066`
2. è¿›å…¥ã€æŠ½å¸§ç®¡ç†ã€‘é¡µé¢
3. å¡«å†™ä»»åŠ¡ä¿¡æ¯ï¼š
   - ä»»åŠ¡ID: `cam_entrance_001`
   - ä»»åŠ¡ç±»å‹: `äººæ•°ç»Ÿè®¡`
   - RTSPåœ°å€: `rtsp://...`
   - æŠ½å¸§é—´éš”: `1000ms`
4. ç‚¹å‡»"æ·»åŠ ä»»åŠ¡"

**ç»“æœ**:
- âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸ
- âœ… ç³»ç»Ÿè‡ªåŠ¨æŠ½å–1å¼ é¢„è§ˆå›¾
- âœ… ä»»åŠ¡çŠ¶æ€ï¼šå¾…é…ç½®ï¼ˆunconfiguredï¼‰
- âœ… ä»»åŠ¡è‡ªåŠ¨åœæ­¢ï¼Œç­‰å¾…é…ç½®

### æ­¥éª¤2: é…ç½®ç®—æ³•å‚æ•°

1. åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšåˆ›å»ºçš„ä»»åŠ¡
2. ç­‰å¾…é¢„è§ˆå›¾ç”Ÿæˆï¼ˆçº¦3-5ç§’ï¼‰
3. ç‚¹å‡»"ç®—æ³•é…ç½®"æŒ‰é’®ï¼ˆé½¿è½®å›¾æ ‡ï¼‰
4. åœ¨å¼¹å‡ºçš„é…ç½®ç•Œé¢ä¸­ï¼š
   - **å·¦ä¾§**ï¼šé¢„è§ˆå›¾ + ç»˜å›¾ç”»å¸ƒ
   - **å³ä¾§**ï¼šåŒºåŸŸé…ç½®é¢æ¿

### æ­¥éª¤3: ç»˜åˆ¶æ£€æµ‹åŒºåŸŸ

#### ç»˜åˆ¶å¤šè¾¹å½¢
1. ç‚¹å‡»"ç»˜åˆ¶å¤šè¾¹å½¢"æŒ‰é’®
2. åœ¨ç”»å¸ƒä¸Šä¾æ¬¡ç‚¹å‡»æ·»åŠ é¡¶ç‚¹
3. åŒå‡»æˆ–å³é”®å®Œæˆç»˜åˆ¶
4. å³ä¾§é¢æ¿ä¼šå‡ºç°åŒºåŸŸé…ç½®

#### ç»˜åˆ¶çŸ©å½¢
1. ç‚¹å‡»"ç»˜åˆ¶çŸ©å½¢"æŒ‰é’®
2. åœ¨ç”»å¸ƒä¸Šç‚¹å‡»ç¬¬ä¸€ä¸ªè§’
3. ç‚¹å‡»å¯¹è§’å³å¯å®Œæˆ

#### ç»˜åˆ¶çº¿
1. ç‚¹å‡»"ç»˜åˆ¶çº¿"æŒ‰é’®
2. ç‚¹å‡»èµ·ç‚¹
3. ç‚¹å‡»ç»ˆç‚¹å®Œæˆ

### æ­¥éª¤4: é…ç½®åŒºåŸŸå±æ€§

åœ¨å³ä¾§é…ç½®é¢æ¿ä¸­ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªåŒºåŸŸè®¾ç½®ï¼š
- **åŒºåŸŸåç§°**: å¦‚"å…¥å£åŒºåŸŸ"
- **é¢œè‰²**: ç‚¹å‡»é¢œè‰²é€‰æ‹©å™¨
- **é€æ˜åº¦**: æ‹–åŠ¨æ»‘å—è°ƒæ•´
- **æ£€æµ‹é˜ˆå€¼**: 0-1ä¹‹é—´çš„æ•°å€¼
- **æ–¹å‘**ï¼ˆä»…çº¿ï¼‰: è¿›å…¥/ç¦»å¼€/åŒå‘
- **å¯ç”¨/ç¦ç”¨**: å¼€å…³æŒ‰é’®

### æ­¥éª¤5: è®¾ç½®ç®—æ³•å‚æ•°

åœ¨é…ç½®é¢æ¿åº•éƒ¨ï¼š
- **ç½®ä¿¡åº¦é˜ˆå€¼**: é»˜è®¤0.7
- **IOUé˜ˆå€¼**: é»˜è®¤0.5

### æ­¥éª¤6: ä¿å­˜é…ç½®

ç‚¹å‡»å³ä¸Šè§’"ä¿å­˜é…ç½®"æŒ‰é’®ï¼š
- âœ… é…ç½®ä¿å­˜åˆ°MinIO (`algo_config.json`)
- âœ… ä»»åŠ¡çŠ¶æ€å˜ä¸º"å·²é…ç½®"ï¼ˆconfiguredï¼‰
- âœ… å¼¹çª—è‡ªåŠ¨å…³é—­

### æ­¥éª¤7: å¯åŠ¨æŠ½å¸§

**æ–¹å¼1 - æ‰‹åŠ¨å¯åŠ¨**:
- ç‚¹å‡»ä»»åŠ¡çš„"å¯åŠ¨"æŒ‰é’®ï¼ˆæ’­æ”¾å›¾æ ‡ï¼‰
- å¼€å§‹æ­£å¸¸æŠ½å¸§å’ŒAIæ¨ç†

**æ–¹å¼2 - è‡ªåŠ¨å¯åŠ¨**:
- å½“å¯¹åº”task_typeçš„ç®—æ³•æœåŠ¡ä¸Šçº¿æ—¶
- ç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨å·²é…ç½®çš„ä»»åŠ¡

---

## ğŸ“ é…ç½®ç¤ºä¾‹

### åœºæ™¯1: äººæ•°ç»Ÿè®¡ï¼ˆå¤šè¾¹å½¢åŒºåŸŸï¼‰

**éœ€æ±‚**: ç»Ÿè®¡å¤§å…å…¥å£å¤„çš„äººæ•°

**é…ç½®**:
1. ç»˜åˆ¶ä¸€ä¸ªå¤šè¾¹å½¢è¦†ç›–å…¥å£åŒºåŸŸ
2. è®¾ç½®ï¼š
   - åŒºåŸŸåç§°ï¼š`å…¥å£åŒºåŸŸ`
   - é¢œè‰²ï¼šçº¢è‰² `#FF0000`
   - é€æ˜åº¦ï¼š0.3
   - æ£€æµ‹é˜ˆå€¼ï¼š0.7

**æ•ˆæœ**: åªç»Ÿè®¡åœ¨å¤šè¾¹å½¢åŒºåŸŸå†…çš„äººæ•°

---

### åœºæ™¯2: è¶Šçº¿æ£€æµ‹ï¼ˆçº¿ï¼‰

**éœ€æ±‚**: æ£€æµ‹äººå‘˜è·¨è¶Šè­¦æˆ’çº¿

**é…ç½®**:
1. ç»˜åˆ¶ä¸€æ¡æ¨ªçº¿ä½œä¸ºè­¦æˆ’çº¿
2. è®¾ç½®ï¼š
   - åŒºåŸŸåç§°ï¼š`è­¦æˆ’çº¿`
   - é¢œè‰²ï¼šé»„è‰² `#FFFF00`
   - æ–¹å‘ï¼šåŒå‘
   - çº¿å®½ï¼š5

**æ•ˆæœ**: æ£€æµ‹äººå‘˜è¶Šè¿‡è¯¥çº¿çš„è¡Œä¸º

---

### åœºæ™¯3: åŒºåŸŸå…¥ä¾µï¼ˆå¤šåŒºåŸŸï¼‰

**éœ€æ±‚**: ç›‘æ§å¤šä¸ªç¦æ­¢åŒºåŸŸ

**é…ç½®**:
1. ç»˜åˆ¶ç¬¬ä¸€ä¸ªçŸ©å½¢ï¼š
   - åŒºåŸŸåç§°ï¼š`ç¦åŒº1`
   - é¢œè‰²ï¼šçº¢è‰²
2. ç»˜åˆ¶ç¬¬äºŒä¸ªçŸ©å½¢ï¼š
   - åŒºåŸŸåç§°ï¼š`ç¦åŒº2`
   - é¢œè‰²ï¼šçº¢è‰²
3. ç»˜åˆ¶ç¬¬ä¸‰ä¸ªå¤šè¾¹å½¢ï¼š
   - åŒºåŸŸåç§°ï¼š`ç¦åŒº3`
   - é¢œè‰²ï¼šçº¢è‰²

**æ•ˆæœ**: æ£€æµ‹åœ¨ä»»æ„ç¦æ­¢åŒºåŸŸå†…çš„å…¥ä¾µè¡Œä¸º

---

## ğŸ”§ é«˜çº§åŠŸèƒ½

### ç¼–è¾‘å·²æœ‰é…ç½®

1. ç‚¹å‡»"ç®—æ³•é…ç½®"æŒ‰é’®
2. ä¼šè‡ªåŠ¨åŠ è½½å·²æœ‰é…ç½®
3. å¯ä»¥ä¿®æ”¹åŒºåŸŸå±æ€§
4. å¯ä»¥æ·»åŠ /åˆ é™¤åŒºåŸŸ
5. ä¿å­˜å³å¯æ›´æ–°

### ç¦ç”¨æŸä¸ªåŒºåŸŸ

åœ¨å³ä¾§é…ç½®é¢æ¿ä¸­ï¼Œå…³é—­è¯¥åŒºåŸŸçš„å¼€å…³å³å¯ã€‚
- ç¦ç”¨çš„åŒºåŸŸä¸ä¼šå‚ä¸æ£€æµ‹
- ä½†é…ç½®ä»ç„¶ä¿ç•™

### åˆ é™¤åŒºåŸŸ

**æ–¹å¼1**: åœ¨ç”»å¸ƒä¸Šé€‰ä¸­åŒºåŸŸï¼Œç‚¹å‡»"åˆ é™¤é€‰ä¸­"  
**æ–¹å¼2**: åœ¨å³ä¾§é¢æ¿å±•å¼€è¯¥åŒºåŸŸï¼Œç‚¹å‡»"åˆ é™¤æ­¤åŒºåŸŸ"

### æ¸…ç©ºæ‰€æœ‰åŒºåŸŸ

ç‚¹å‡»å·¥å…·æ çš„"æ¸…ç©ºå…¨éƒ¨"æŒ‰é’®

### é‡ç½®é…ç½®

ç‚¹å‡»"é‡ç½®"æŒ‰é’®ï¼Œæ¢å¤åˆ°ä¸Šæ¬¡ä¿å­˜çš„çŠ¶æ€

---

## ğŸ“Š é…ç½®æŸ¥çœ‹

### æŸ¥çœ‹JSONé…ç½®

é…ç½®ä¿å­˜åœ¨MinIOä¸­ï¼š
```
è·¯å¾„ï¼šframes/{task_type}/{task_id}/algo_config.json
```

è®¿é—®MinIOæ§åˆ¶å°å¯ä»¥æŸ¥çœ‹å’Œä¸‹è½½é…ç½®æ–‡ä»¶ã€‚

### APIæŸ¥è¯¢

```bash
curl http://localhost:5066/api/v1/frame_extractor/tasks/cam_entrance_001/config
```

---

## ğŸ¨ ç»˜å›¾æŠ€å·§

### å¤šè¾¹å½¢ç»˜åˆ¶

1. ç‚¹å‡»"ç»˜åˆ¶å¤šè¾¹å½¢"
2. æ²¿ç€ç›®æ ‡åŒºåŸŸè¾¹ç¼˜ä¾æ¬¡ç‚¹å‡»
3. æœ€ååŒå‡»æˆ–å³é”®å®Œæˆ
4. ç³»ç»Ÿä¼šè‡ªåŠ¨é—­åˆå¤šè¾¹å½¢

**æç¤º**: è‡³å°‘éœ€è¦3ä¸ªé¡¶ç‚¹

### ç²¾ç¡®ç»˜åˆ¶

1. ä½¿ç”¨é¼ æ ‡æ»šè½®å¯ä»¥ç¼©æ”¾ç”»å¸ƒï¼ˆå¦‚æœå®ç°ï¼‰
2. å¯ä»¥æ‹–åŠ¨å·²ç»˜åˆ¶çš„å›¾å½¢è°ƒæ•´ä½ç½®
3. å¯ä»¥æ‹–åŠ¨è§’ç‚¹è°ƒæ•´å¤§å°

### é¢œè‰²é€‰æ‹©

å»ºè®®ä¸ºä¸åŒåŠŸèƒ½çš„åŒºåŸŸä½¿ç”¨ä¸åŒé¢œè‰²ï¼š
- çº¢è‰² `#FF0000` - ç¦æ­¢åŒºåŸŸ
- é»„è‰² `#FFFF00` - è­¦å‘ŠåŒºåŸŸ
- ç»¿è‰² `#00FF00` - æ­£å¸¸åŒºåŸŸ
- è“è‰² `#0000FF` - ç»Ÿè®¡åŒºåŸŸ

---

## âš™ï¸ ç®—æ³•å‚æ•°è¯´æ˜

### ç½®ä¿¡åº¦é˜ˆå€¼ (confidence_threshold)

- **èŒƒå›´**: 0.0 - 1.0
- **é»˜è®¤**: 0.7
- **è¯´æ˜**: ä½äºæ­¤å€¼çš„æ£€æµ‹ç»“æœä¼šè¢«è¿‡æ»¤
- **å»ºè®®**:
  - è¦æ±‚é«˜å‡†ç¡®ç‡ï¼š0.8-0.9
  - å¹³è¡¡å‡†ç¡®ç‡å’Œå¬å›ç‡ï¼š0.6-0.7
  - è¦æ±‚é«˜å¬å›ç‡ï¼š0.4-0.5

### IOUé˜ˆå€¼ (iou_threshold)

- **èŒƒå›´**: 0.0 - 1.0
- **é»˜è®¤**: 0.5
- **è¯´æ˜**: NMSï¼ˆéæå¤§å€¼æŠ‘åˆ¶ï¼‰çš„IOUé˜ˆå€¼
- **å»ºè®®**:
  - å¯†é›†åœºæ™¯ï¼š0.3-0.4
  - æ­£å¸¸åœºæ™¯ï¼š0.5
  - ç¨€ç–åœºæ™¯ï¼š0.6-0.7

---

## ğŸ”„ å·¥ä½œæµç¨‹

```
æ·»åŠ ä»»åŠ¡
    â†“
è‡ªåŠ¨æŠ½å–1å¼ é¢„è§ˆå›¾ï¼ˆ3-5ç§’ï¼‰
    â†“
ä»»åŠ¡çŠ¶æ€ï¼šå¾…é…ç½® ğŸŸ 
    â†“
ç‚¹å‡»"ç®—æ³•é…ç½®"
    â†“
ç»˜åˆ¶åŒºåŸŸ + è®¾ç½®å‚æ•°
    â†“
ä¿å­˜é…ç½®
    â†“
ä»»åŠ¡çŠ¶æ€ï¼šå·²é…ç½® ğŸŸ¢
    â†“
å¯åŠ¨ä»»åŠ¡ï¼ˆæ‰‹åŠ¨æˆ–è‡ªåŠ¨ï¼‰
    â†“
æ­£å¸¸æŠ½å¸§ + AIæ¨ç†ï¼ˆä½¿ç”¨é…ç½®ï¼‰
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. é¢„è§ˆå›¾ç”Ÿæˆæ—¶é—´

- æ·»åŠ ä»»åŠ¡åéœ€è¦3-5ç§’ç”Ÿæˆé¢„è§ˆå›¾
- é¢„è§ˆå›¾æœªç”Ÿæˆæ—¶ï¼Œ"ç®—æ³•é…ç½®"æŒ‰é’®ä¸ºç¦ç”¨çŠ¶æ€
- åˆ·æ–°ä»»åŠ¡åˆ—è¡¨å¯ä»¥æŸ¥çœ‹æ˜¯å¦ç”Ÿæˆå®Œæˆ

### 2. é…ç½®ä¿å­˜è¦æ±‚

- è‡³å°‘ç»˜åˆ¶ä¸€ä¸ªåŒºåŸŸæ‰èƒ½ä¿å­˜
- æ‰€æœ‰åŒºåŸŸéƒ½ä¼šè¢«ä¿å­˜ï¼ŒåŒ…æ‹¬ç¦ç”¨çš„

### 3. ä»»åŠ¡å¯åŠ¨æ¡ä»¶

**æ‰‹åŠ¨å¯åŠ¨**: ä»»æ„æ—¶å€™éƒ½å¯ä»¥ç‚¹å‡»å¯åŠ¨  
**è‡ªåŠ¨å¯åŠ¨**: éœ€è¦æ»¡è¶³ï¼š
- ä»»åŠ¡çŠ¶æ€ä¸º"å·²é…ç½®"
- ä»»åŠ¡å½“å‰æœªè¿è¡Œ
- å¯¹åº”task_typeçš„ç®—æ³•æœåŠ¡åœ¨çº¿

### 4. é…ç½®æ›´æ–°

- æ›´æ–°é…ç½®åéœ€è¦é‡å¯ä»»åŠ¡æ‰ç”Ÿæ•ˆ
- å»ºè®®ï¼šåœæ­¢ä»»åŠ¡ â†’ æ›´æ–°é…ç½® â†’ å¯åŠ¨ä»»åŠ¡

### 5. åæ ‡ç³»ç»Ÿ

- æ‰€æœ‰åæ ‡åŸºäºé¢„è§ˆå›¾çš„åŸå§‹åˆ†è¾¨ç‡
- ç®—æ³•æœåŠ¡æ”¶åˆ°çš„ä¹Ÿæ˜¯åŸå§‹åæ ‡
- å¦‚æœè§†é¢‘åˆ†è¾¨ç‡ä¸åŒï¼Œç®—æ³•éœ€è¦è‡ªè¡Œå¤„ç†

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### 1. éªŒè¯é¢„è§ˆå›¾ç”Ÿæˆ

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f logs/sugar.log | grep "preview frame"

# åº”è¯¥çœ‹åˆ°ï¼š
# [INFO] extracting preview frame task=cam_entrance_001
# [INFO] preview frame uploaded to minio task=cam_entrance_001 path=frames/...
```

### 2. éªŒè¯é…ç½®ä¿å­˜

```bash
# æŸ¥çœ‹MinIO
# è®¿é—® http://minio-host:9000
# æŸ¥çœ‹ images/frames/{task_type}/{task_id}/algo_config.json
```

### 3. éªŒè¯æ¨ç†è¯·æ±‚

```bash
# æŸ¥çœ‹ç®—æ³•æœåŠ¡æ—¥å¿—
# åº”è¯¥çœ‹åˆ°åŒ…å«algo_configçš„æ¨ç†è¯·æ±‚
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ–‡æ¡£

- **ç®—æ³•é…ç½®è§„èŒƒ**: `doc/ALGORITHM_CONFIG_SPEC.md`
- **ç®—æ³•å¯¹æ¥æŒ‡å—**: `doc/ALGORITHM_INTEGRATION_GUIDE.md`
- **APIæ–‡æ¡£**: `doc/EasyDarwin.api.html`

### ç¤ºä¾‹

- **ç®—æ³•æœåŠ¡ç¤ºä¾‹**: `examples/algorithm_service.py`
- **YOLOæœåŠ¡ç¤ºä¾‹**: `examples/yolo_algorithm_service.py`

### è”ç³»

- **é¡¹ç›®åœ°å€**: https://github.com/zhouyingchaoAI/easyAIServer
- **æäº¤Issue**: æäº¤é—®é¢˜å’Œå»ºè®®

---

## â“ å¸¸è§é—®é¢˜

### Q1: é¢„è§ˆå›¾ä¸€ç›´ä¸ç”Ÿæˆï¼Ÿ

**åŸå› **: RTSPåœ°å€å¯èƒ½æ— æ³•è®¿é—®

**è§£å†³**:
1. æ£€æŸ¥RTSPåœ°å€æ˜¯å¦æ­£ç¡®
2. æµ‹è¯•RTSPè¿æ¥ï¼š`ffmpeg -i rtsp://... -frames:v 1 test.jpg`
3. æŸ¥çœ‹æ—¥å¿—ï¼š`tail -f logs/sugar.log | grep "preview"`

### Q2: é…ç½®ä¿å­˜å¤±è´¥ï¼Ÿ

**åŸå› **: MinIOæœªæ­£ç¡®é…ç½®

**è§£å†³**:
1. æ£€æŸ¥ `config.toml` ä¸­çš„MinIOé…ç½®
2. è¿è¡Œæµ‹è¯•ï¼š`python3 test_minio_connection.py`
3. ç¡®ä¿bucketå­˜åœ¨

### Q3: ç®—æ³•æœåŠ¡æ²¡æœ‰æ”¶åˆ°é…ç½®ï¼Ÿ

**åŸå› **: å¯èƒ½æœªæ­£ç¡®åŠ è½½

**è§£å†³**:
1. æ£€æŸ¥ç®—æ³•æœåŠ¡æ—¥å¿—ï¼Œç¡®è®¤æ”¶åˆ° `algo_config` å­—æ®µ
2. åç«¯æ—¥å¿—æŸ¥çœ‹ï¼š`grep "algo config" logs/sugar.log`

### Q4: ä»»åŠ¡ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Ÿ

**åŸå› **: é…ç½®æˆ–ç®—æ³•æœåŠ¡çŠ¶æ€é—®é¢˜

**æ£€æŸ¥**:
1. ä»»åŠ¡é…ç½®çŠ¶æ€æ˜¯å¦ä¸º"å·²é…ç½®"
2. ç®—æ³•æœåŠ¡æ˜¯å¦åœ¨çº¿ï¼š`curl http://localhost:5066/api/v1/ai_analysis/services`
3. task_typeæ˜¯å¦åŒ¹é…

### Q5: å¦‚ä½•å¯¼å‡º/å¯¼å…¥é…ç½®ï¼Ÿ

**å¯¼å‡º**:
```bash
curl http://localhost:5066/api/v1/frame_extractor/tasks/cam_001/config > config.json
```

**å¯¼å…¥**:
```bash
curl -X POST http://localhost:5066/api/v1/frame_extractor/tasks/cam_001/config \
  -H "Content-Type: application/json" \
  -d @config.json
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. åŒºåŸŸè®¾è®¡

- **ç²¾ç¡®æ€§**: åŒºåŸŸè¾¹ç•Œåº”ç´§è´´ç›®æ ‡åŒºåŸŸ
- **æ•°é‡**: ä¸€èˆ¬1-5ä¸ªåŒºåŸŸå³å¯ï¼Œè¿‡å¤šå½±å“æ€§èƒ½
- **å‘½å**: ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼Œå¦‚"å…¥å£"ã€"ç¦åŒº1"

### 2. å‚æ•°è°ƒä¼˜

- **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨è¾ƒä½é˜ˆå€¼ï¼ˆ0.5-0.6ï¼‰ï¼Œä¾¿äºæµ‹è¯•
- **ç”Ÿäº§ç¯å¢ƒ**: æ ¹æ®å®é™…æ•ˆæœè°ƒæ•´åˆ°0.7-0.8
- **A/Bæµ‹è¯•**: å¯¹æ¯”ä¸åŒå‚æ•°çš„æ•ˆæœ

### 3. é…ç½®ç®¡ç†

- **å¤‡ä»½é…ç½®**: å®šæœŸå¯¼å‡ºJSONé…ç½®
- **ç‰ˆæœ¬ç®¡ç†**: é‡å¤§è°ƒæ•´å‰å…ˆå¤‡ä»½
- **æ–‡æ¡£è®°å½•**: è®°å½•é…ç½®å˜æ›´åŸå› 

---

## ğŸ“‹ å®Œæ•´ç¤ºä¾‹

### äººæ•°ç»Ÿè®¡ - å¤šåŒºåŸŸé…ç½®

**åœºæ™¯**: ç»Ÿè®¡å•†åœºä¸‰ä¸ªå…¥å£çš„äººæ•°

**é…ç½®**:
```json
{
  "task_id": "mall_entrance",
  "task_type": "äººæ•°ç»Ÿè®¡",
  "regions": [
    {
      "id": "region_001",
      "name": "ä¸œé—¨",
      "type": "polygon",
      "enabled": true,
      "points": [[100, 150], [400, 150], [400, 450], [100, 450]],
      "properties": {"color": "#FF0000", "opacity": 0.3}
    },
    {
      "id": "region_002",
      "name": "è¥¿é—¨",
      "type": "polygon",
      "enabled": true,
      "points": [[500, 150], [800, 150], [800, 450], [500, 450]],
      "properties": {"color": "#00FF00", "opacity": 0.3}
    },
    {
      "id": "region_003",
      "name": "å—é—¨",
      "type": "rectangle",
      "enabled": true,
      "points": [[900, 150], [1200, 450]],
      "properties": {"color": "#0000FF", "opacity": 0.3}
    }
  ],
  "algorithm_params": {
    "confidence_threshold": 0.75
  }
}
```

### è¶Šçº¿æ£€æµ‹ - åŒå‘ç›‘æ§

**åœºæ™¯**: ç›‘æ§è¿›å‡ºé€šé“

**é…ç½®**:
```json
{
  "task_id": "gate_monitor",
  "task_type": "åŒºåŸŸå…¥ä¾µ",
  "regions": [
    {
      "id": "region_001",
      "name": "å…¥å£çº¿",
      "type": "line",
      "enabled": true,
      "points": [[300, 200], [600, 200]],
      "properties": {
        "color": "#4ECDC4",
        "thickness": 5,
        "direction": "in"
      }
    },
    {
      "id": "region_002",
      "name": "å‡ºå£çº¿",
      "type": "line",
      "enabled": true,
      "points": [[300, 400], [600, 400]],
      "properties": {
        "color": "#FFE66D",
        "thickness": 5,
        "direction": "out"
      }
    }
  ],
  "algorithm_params": {
    "confidence_threshold": 0.8
  }
}
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šé…ç½®æŒ‰é’®ä¸€ç›´ç¦ç”¨

**æ£€æŸ¥**:
```bash
# 1. æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨ï¼Œç¡®è®¤preview_imageå­—æ®µ
curl http://localhost:5066/api/v1/frame_extractor/tasks

# 2. æŸ¥çœ‹é¢„è§ˆå›¾ç”Ÿæˆæ—¥å¿—
grep "preview frame" logs/sugar.log

# 3. æ‰‹åŠ¨è§¦å‘é¢„è§ˆå›¾ç”Ÿæˆï¼ˆå¦‚éœ€è¦ï¼‰
# ç›®å‰æ˜¯è‡ªåŠ¨è§¦å‘ï¼Œå¦‚æœå¤±è´¥å¯èƒ½éœ€è¦é‡æ–°æ·»åŠ ä»»åŠ¡
```

### é—®é¢˜ï¼šé…ç½®ä¿å­˜åæ¨ç†ä»æ— æ•ˆ

**æ£€æŸ¥**:
```bash
# 1. ç¡®è®¤é…ç½®å·²ä¿å­˜
curl http://localhost:5066/api/v1/frame_extractor/tasks/cam_001/config

# 2. æŸ¥çœ‹æ¨ç†è¯·æ±‚æ—¥å¿—
grep "algo_config" logs/sugar.log

# 3. æŸ¥çœ‹ç®—æ³•æœåŠ¡æ¥æ”¶çš„è¯·æ±‚
# åœ¨ç®—æ³•æœåŠ¡ç«¯æŸ¥çœ‹æ—¥å¿—
```

---

## âœ… æ£€æŸ¥æ¸…å•

ä½¿ç”¨å‰æ£€æŸ¥ï¼š

- [ ] MinIOé…ç½®æ­£ç¡®
- [ ] æŠ½å¸§ä»»åŠ¡å·²åˆ›å»º
- [ ] é¢„è§ˆå›¾å·²ç”Ÿæˆ
- [ ] å¯ä»¥æ‰“å¼€é…ç½®ç•Œé¢
- [ ] å¯ä»¥ç»˜åˆ¶åŒºåŸŸ
- [ ] å¯ä»¥ä¿å­˜é…ç½®
- [ ] ç®—æ³•æœåŠ¡å·²æ³¨å†Œ
- [ ] ç®—æ³•æœåŠ¡æ”¯æŒå¯¹åº”task_type

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…ç›¸å…³æ–‡æ¡£æˆ–æäº¤Issueã€‚

