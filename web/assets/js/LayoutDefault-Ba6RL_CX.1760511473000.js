import{u as H,l as ut,t as Oe,a as rt,b as Ue}from"./index-CgW2loGF.1760511473000.js";import{d as ct}from"./pinia-BPNkUVLG.1760511473000.js";import{u as oe,b as le,R as it}from"./vue-router-Duq7i_u2.1760511473000.js";import{u as Z}from"./vue-i18n-DH6klY8k.1760511473000.js";import{u as dt,a as pt,b as mt,c as _t,d as vt,e as ft,o as re}from"./@vueuse-CF0qcTcr.1760511473000.js";import{d as ee}from"./dayjs-CRURpGSg.1760511473000.js";import{r as B,w as ae,f as l,Z as O,W as t,c as n,X as a,u as s,F as K,_ as J,V as u,$ as j,a0 as je,a1 as T,a2 as z,J as A,a3 as M,a4 as yt,x as ht,a5 as Ae,a6 as be,y as Me,E as Be,n as He,a7 as gt,d as wt,s as kt,a8 as ce,G as bt}from"./vue-DcFgi5qX.1760511473000.js";import{u as Ke}from"./user-Bdc_FELh.1760511473000.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.1760511473000.js";import{O as St,T as xt,V as Tt,S as Ee,X as ie,Y as Ct,_ as Lt,D as $t,N as Ne,b as Pt,$ as Rt,a0 as Ft,a1 as De,a2 as Ot}from"./@ant-design-D_IhUzkf.1760511473000.js";import{c as pe,D as Ut,d as At,T as Mt,e as Bt,I as Ve,f as Et,g as Dt,S as It,h as jt,i as Ht,B as We,j as ze,k as de,m as me,_ as se,n as ue,o as _e,M as ve,p as Kt,q as Nt,r as qe,s as Vt,t as xe,u as Wt,v as zt,w as qt,F as Gt,x as Ge,L as Jt,y as Xt,z as Je,A as Zt,E as Yt,G as Xe,H as fe}from"./ant-design-vue-Cj9mvhaX.1760511473000.js";import{u as Qt}from"./base-DQW9dPRJ.1760511473000.js";import{I as te}from"./@iconify-DKUBVEsd.1760511473000.js";import"./nprogress-B6e-UgSL.1760511473000.js";import"./clipboard-DnI0MzOy.1760511473000.js";/* empty css                                  */import"./pinia-plugin-persistedstate-n2tMOXAx.1760511473000.js";import"./lodash-es-C9rdhAyu.1760511473000.js";import"./@babel-Bq4_u9L9.1760511473000.js";import"./@ctrl-DOFZgDuz.1760511473000.js";import"./resize-observer-polyfill-B1PUzC5B.1760511473000.js";import"./dom-align-CRCehRfe.1760511473000.js";import"./async-validator-9PlIezaS.1760511473000.js";import"./scroll-into-view-if-needed-B3z4cY-J.1760511473000.js";import"./throttle-debounce-CUWDS_la.1760511473000.js";import"./vue-types-CF28atMM.1760511473000.js";import"./@emotion-BtrR-yrm.1760511473000.js";import"./stylis-D5iaQeiq.1760511473000.js";import"./@intlify-C7-MzqOv.1760511473000.js";import"./request-BDQifrB0.1760511473000.js";import"./axios-ngrFHoWO.1760511473000.js";import"./qs-BF-lf3J5.1760511473000.js";import"./side-channel-Bd9WoLds.1760511473000.js";import"./crypto-js-B8-feqXo.1760511473000.js";const Y=ct("system",()=>{const{t:m}=Z(),o=oe(),c=le(),e=H(),r=B(o.options.routes.find(k=>k.name==="Layout").children.filter(k=>k.name!=="Refresh")),p=B([]),d=(k,F)=>{k.forEach(U=>{U.searchTitle=m(U.meta.title),U.children?d(U.children,U):(F&&(U.searchTitle=`${F.searchTitle} / ${m(U.meta.title)}`),p.value.push(U))})};d(r.value);const f=(k,F)=>{switch(k){case"add":r.value.push(F);break;case"delete":r.value=r.value.filter(U=>U.name!==F.name);break}p.value=[],d(r.value)};ae(()=>r.value,()=>{d(r.value)});const i=B([]),_=l(()=>i.value.filter(k=>o.hasRoute(k.name))),L=l(()=>i.value.find(k=>k.fullPath===c.fullPath));let v=B([]);const b=k=>{typeof k=="string"?!v.value.includes(k)&&v.value.push(k):k.forEach(F=>{F&&!v.value.includes(F)&&v.value.push(F)})},$=k=>{typeof k=="string"?v.value=v.value.filter(F=>F!==k):v.value=v.value.filter(F=>!k.includes(F))},y=()=>{v.value=[]},h=k=>({...k,matched:k.matched.map(F=>{const{meta:U,path:Q,name:ne}=F;return{meta:U,path:Q,name:ne}})}),w=k=>{const F=o.getRoutes(),U=k.reduce((Q,ne)=>{var $e,Pe,Re;if(ne.name&&o.hasRoute(ne.name)){const Fe=(Re=(Pe=($e=F.find(st=>st.name===ne.name))==null?void 0:$e.components)==null?void 0:Pe.default)==null?void 0:Re.name;Fe&&Q.push(Fe)}return Q},[]);$(U)},x=k=>{i.value.some(U=>U.fullPath===k.fullPath)||i.value.push(h(k))},S=k=>{const F=i.value.findIndex(Q=>Q.fullPath===k.fullPath),U=Object.is(L.value,i.value[F]);if(w(i.value.splice(F,1)),U){const Q=i.value[Math.max(0,i.value.length-1)];o.push(Q)}},D=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);w(i.value.splice(0,F))},N=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);w(i.value.splice(F+1))},R=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);if(F!==-1){const U=i.value.splice(F,1);w(i.value),i.value=U}},C=()=>{w(i.value),i.value=[]};ae(()=>c.fullPath,()=>{["Login","NotFound","Refresh",void 0].includes(c.name)||x(c)},{immediate:!0}),window.addEventListener("beforeunload",()=>{e.layoutSetting.cacheTabs||(i.value=[L.value||i.value[0]].filter(Boolean))});const I=B({}),E=["日","一","二","三","四","五","六"],q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];dt(()=>{I.value={year:ee().year(),month:ee().month()+1,day:ee().date(),hour:ee().hour(),minute:ee().minute(),second:ee().second(),week:e.layoutSetting.language==="zhCN"?`星期${E[ee().day()]}`:q[ee().day()]}});const V=B(""),G=B(!1),W=l(()=>e.layoutSetting.lockScreenTime*60*60),g=B(0);setInterval(()=>{g.value+=1},1e3);const P=k=>{G.value=k,k||(Ze(),g.value=0)},Ce=k=>{V.value=encodeURI(k)},Ze=()=>{V.value=""},Ye=k=>encodeURI(k)===V.value,Qe=()=>decodeURI(V.value);ae(W,()=>{g.value=0}),ae(g,()=>{g.value>=W.value&&e.layoutSetting.showLockScreen&&(P(!0),Ce("123456"))});const{charging:et,chargingTime:tt,dischargingTime:at,level:ot}=pt(),nt=B({charging:et,chargingTime:tt,dischargingTime:at,level:ot}),lt=mt(),Le=B("desktop");return _t(document.body,k=>{const F=k[0],{width:U}=F.contentRect;Le.value=U<992?"mobile":"desktop"}),{menus:r,menuList:p,tabsList:i,getTabsList:_,getCurrentTab:L,keepAliveList:v,systemTime:I,lockScreenState:G,lockScreenPassword:V,battery:nt,online:lt,device:Le,updateMenus:f,addTabs:x,closeCurrentTab:S,closeLeftTabs:D,closeRightTabs:N,closeOtherTabs:R,closeAllTabs:C,addKeepAliveList:b,removeKeepAliveList:$,clearKeepAliveList:y,setLockScreenState:P,setLockScreenPassword:Ce,verifyLockScreenPassword:Ye,decodeLockScreenPassword:Qe,clearCacheReload:()=>{localStorage.clear(),sessionStorage.clear(),location.reload(),r.value=o.options.routes.find(k=>k.name==="Layout").children.filter(k=>k.name!=="Refresh"),p.value=[],d(r.value),G.value=!1,V.value="",i.value=[],v.value=[]}}}),ea=["onClick"],ta={class:"w60px h60px","aria-hidden":"true"},aa=["xlink:href"],oa={key:0,class:"style-checkbox-item"},na={class:"flex-ac"},la={__name:"LayoutSetting",setup(m){const{t:o}=Z(),c=H(),e=l(()=>c.layoutSetting),r=l(()=>c.layoutSetting.colorPrimary),p=l(()=>({"--custom-color":r.value})),d=Y(),f=B(!1),i=()=>{f.value=!0},_=y=>{c.updateLayoutSetting({layout:y})},L=y=>{c.updateLayoutSetting({colorPrimary:y})},v=y=>r.value===y?"visible":"hidden",b=()=>{const y=JSON.stringify(e.value);navigator.clipboard.writeText(y),de.success(o("message.copySuccess"))},$=y=>{L(y.target.value)};return(y,h)=>{const w=pe,x=At,S=Ut,D=Mt,N=Ve,R=Bt,C=Et,I=Dt,E=jt,q=It,V=Ht,G=We,W=ze;return t(),O(K,null,[n(w,{title:s(o)("setting.projectConfig"),placement:"bottomRight"},{default:a(()=>[n(s(St),{onClick:i})]),_:1},8,["title"]),n(W,{open:f.value,"onUpdate:open":h[3]||(h[3]=g=>f.value=g),placement:"right",title:s(o)("setting.projectConfig")},{footer:a(()=>[j("div",na,[n(G,{class:"w-45%",type:"primary",onClick:b},{default:a(()=>[A(M(s(o)("setting.copy")),1)]),_:1}),n(G,{class:"w-45%",type:"primary",danger:"",onClick:s(d).clearCacheReload},{default:a(()=>[A(M(s(o)("setting.clearCacheAndReset")),1)]),_:1},8,["onClick"])])]),default:a(()=>[n(S,{title:s(o)("setting.menuLayout"),column:5},{default:a(()=>[(t(!0),O(K,null,J(s(ut),g=>(t(),u(x,{key:g.value},{default:a(()=>[n(w,{title:s(o)(g.label)},{default:a(()=>[j("div",{class:je(["style-checkbox-item",{active:e.value.layout===g.value}]),onClick:P=>_(g.value)},[(t(),O("svg",ta,[j("use",{"xlink:href":`#svg-icon-${g.value}`},null,8,aa)]))],10,ea)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1},8,["title"]),n(S,{title:s(o)("setting.themeColor"),column:s(Oe).length-1},{default:a(()=>[(t(!0),O(K,null,J(s(Oe),g=>(t(),u(x,{key:g.key},{default:a(()=>[g.tag==="checkbox"?(t(),O("div",oa,[n(w,{title:s(o)(g.title)},{default:a(()=>[n(D,{color:g.value,onClick:P=>L(g.value)},{default:a(()=>[j("span",{style:z({visibility:v(g.value)})}," ✔ ",4)]),_:2},1032,["color","onClick"])]),_:2},1032,["title"])])):T("",!0),g.tag==="input-color"?(t(),u(R,{key:1,justify:"space-between",class:"w-full flex items-center style-checkbox-item"},{default:a(()=>[A(M(s(o)("setting.customColor"))+" ",1),n(D,{color:r.value,class:"relative overflow-hidden"},{default:a(()=>[n(N,{type:"color",class:"cursor-pointer absolute top-0 left-0 w-full h-full",style:z(p.value),modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=P=>r.value=P),onInput:$},null,8,["style","modelValue"]),j("span",{style:z({visibility:v(r.value)})}," ✔ ",4)]),_:1},8,["color"])]),_:1})):T("",!0)]),_:2},1024))),128))]),_:1},8,["title","column"]),n(S,{title:s(o)("setting.pageDisplay"),column:1},{default:a(()=>[(t(!0),O(K,null,J(s(rt),g=>(t(),u(x,{key:g.value},{default:a(()=>[g.tag==="switch"?(t(),u(R,{key:0,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(g.label))+" ",1),n(C,{checked:e.value[g.value],"onUpdate:checked":P=>e.value[g.value]=P},null,8,["checked","onUpdate:checked"])]),_:2},1024)):T("",!0),g.tag==="input-number"?(t(),u(R,{key:1,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(g.label))+" ",1),n(I,{style:{width:"200px"},value:e.value[g.value],"onUpdate:value":P=>e.value[g.value]=P,min:g.min,max:g.max,"addon-after":s(o)(g.unit)},null,8,["value","onUpdate:value","min","max","addon-after"])]),_:2},1024)):T("",!0),g.tag==="input"?(t(),u(R,{key:2,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(g.label))+" ",1),n(N,{style:{width:"200px"},value:e.value[g.value],"onUpdate:value":P=>e.value[g.value]=P},null,8,["value","onUpdate:value"])]),_:2},1024)):T("",!0),g.tag==="select"?(t(),u(R,{key:3,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(g.label))+" ",1),g.value==="animation"?(t(),u(q,{key:0,style:{width:"200px"},value:e.value.animation,"onUpdate:value":h[1]||(h[1]=P=>e.value.animation=P)},{default:a(()=>[(t(!0),O(K,null,J(s(Ue),P=>(t(),u(E,{key:P.animation},{default:a(()=>[A(M(s(o)(P.name)),1)]),_:2},1024))),128))]),_:1},8,["value"])):g.value==="animationDirection"?(t(),u(q,{key:1,style:{width:"200px"},value:e.value.animationDirection,"onUpdate:value":h[2]||(h[2]=P=>e.value.animationDirection=P)},{default:a(()=>[(t(!0),O(K,null,J(s(Ue).find(P=>P.animation===e.value.animation).options,P=>(t(),u(E,{key:P},{default:a(()=>[A(M(P),1)]),_:2},1024))),128))]),_:1},8,["value"])):(t(),u(q,{key:2,style:{width:"200px"},value:e.value[g.value],"onUpdate:value":P=>e.value[g.value]=P},{default:a(()=>[(t(!0),O(K,null,J(g.options,P=>(t(),u(E,{key:P.value,value:P.value},{default:a(()=>[A(M(s(o)(P.label)),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]))]),_:2},1024)):T("",!0),g.tag==="segmented"?(t(),u(R,{key:4,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(g.label))+" ",1),n(V,{value:e.value[g.value],"onUpdate:value":P=>e.value[g.value]=P,options:g.options.map(P=>({value:P.value,label:s(o)(P.label)}))},null,8,["value","onUpdate:value","options"])]),_:2},1024)):T("",!0)]),_:2},1024))),128))]),_:1},8,["title"])]),_:1},8,["open","title"])],64)}}},Te=Se(la,[["__scopeId","data-v-de9767ed"]]),X={__name:"LayoutPage",setup(m){const o=Y(),c=l(()=>o.keepAliveList),e=H().layoutSetting,r=l(()=>e.onlyShowContent),p=l(()=>e.showAnimation),d=l(()=>e.showTabs),f=l(()=>e.showHeader),i=l(()=>e.showSetting),_=B("auto"),L=l(()=>r.value?"100vh":`calc(100vh - ${e.showHeader?"var(--app-header-height)":"0px"} - ${e.showTabs?"50px":"0px"} - ${e.showFooter?"var(--app-footer-height)":"0px"})`),v=l(()=>`animate__animated animate__${e.animation}In${e.animationDirection==="Default"?"":e.animationDirection}`),b=l(()=>`animate__animated animate__${e.animation}Out${e.animationDirection==="Default"?"":e.animationDirection}`);return($,y)=>{const h=me;return t(),O("div",{class:"p20px overflow-hidden",style:z({overflow:_.value,height:L.value})},[n(s(it),null,{default:a(({Component:w,route:x})=>[(t(),u(yt,null,{fallback:a(()=>[...y[3]||(y[3]=[A(" 正在加载... ",-1)])]),default:a(()=>[p.value?(t(),u(ht,{key:0,mode:"out-in",appear:"","enter-active-class":v.value,"leave-active-class":b.value,onBeforeEnter:y[0]||(y[0]=S=>_.value="hidden"),onAfterEnter:y[1]||(y[1]=S=>_.value="auto"),onBeforeLeave:y[2]||(y[2]=S=>_.value="hidden")},{default:a(()=>[(t(),u(Ae,{include:c.value},[(t(),u(be(w),{key:x.fullPath}))],1032,["include"]))]),_:2},1032,["enter-active-class","leave-active-class"])):(t(),u(Ae,{key:1,include:c.value},[(t(),u(be(w),{key:x.fullPath}))],1032,["include"]))]),_:2},1024))]),_:1}),!f.value&&!d.value&&i.value?(t(),u(h,{key:0,class:"pos-fixed right--1 top-100 z-999",bodyStyle:{padding:"10px"}},{default:a(()=>[n(Te)]),_:1})):T("",!0)],4)}}},sa={__name:"OnlyShowContentLayout",setup(m){const c=H().layoutSetting,e=l(()=>c.watermark),r=l(()=>c.watermarkArea==="content"),p=l(()=>c.watermarkText),d=l(()=>c.showSetting);return(f,i)=>{const _=se,L=me,v=ue;return t(),u(v,{class:"h100vh overflow-hidden"},{default:a(()=>[e.value&&r.value?(t(),u(_,{key:0,content:p.value},{default:a(()=>[n(X)]),_:1},8,["content"])):(t(),u(X,{key:1})),d.value?(t(),u(L,{key:2,class:"pos-fixed right--1 top-100 z-999",bodyStyle:{padding:"10px"}},{default:a(()=>[n(Te)]),_:1})):T("",!0)]),_:1})}}},ye={__name:"LayoutTitle",props:{collapsed:{type:Boolean}},setup(m){const o=Qt(),c=oe(),e=l(()=>o.serverInfo&&o.serverInfo.version),r=H(),p=r.layoutSetting,d=l(()=>p.title),f=l(()=>r.titleColor),i=l(()=>({height:"var(--app-header-height)",color:f.value})),_=()=>{c.push({name:"Live"})};return o.getServerInfo(),(L,v)=>(t(),O("div",{class:"flex-cc overflow-hidden whitespace-nowrap font-500 text-20px cp",style:z(i.value)},[Me(j("span",null,"E",512),[[Be,m.collapsed]]),Me(j("div",{class:je([{pr24px:!m.collapsed}]),onClick:_},[A(M(d.value),1),j("sup",null,M(e.value),1)],2),[[Be,!m.collapsed]])],4))}},ua=["title"],ra={__name:"MenuItemContent",props:{item:{type:Object,default:()=>({})}},setup(m){const{t:o}=Z();return(c,e)=>{var r,p,d,f;return t(),O(K,null,[(p=(r=m.item)==null?void 0:r.meta)!=null&&p.icon?(t(),u(s(te),{key:0,class:"iconify anticon",icon:m.item.meta.icon},null,8,["icon"])):T("",!0),j("span",{class:"ml10px text-14px",title:s(o)((f=(d=m.item)==null?void 0:d.meta)==null?void 0:f.title)},M(s(o)(m.item.meta.title)),9,ua)],64)}}},ca={__name:"MenuItem",props:{item:{type:Object,default:()=>({})}},setup(m){const o=oe(),c=e=>{const{outsideLink:r}=e.meta||{};r?window.open(e.path):o.push({name:e.name})};return(e,r)=>{var d;const p=_e;return m.item.hide?T("",!0):(t(),u(p,{key:(d=m.item)==null?void 0:d.name,onClick:r[0]||(r[0]=f=>c(m.item))},{default:a(()=>[n(ra,{item:m.item},null,8,["item"])]),_:1}))}}},ia={__name:"SubMenuItem",props:{item:{type:Object,default:()=>({})}},setup(m){return(o,c)=>(t(),u(ca,{key:1,item:m.item},null,8,["item"]))}},he={__name:"LayoutMenu",props:{collapsed:{type:Boolean}},setup(m){const o=m,c=le(),e=oe(),r=B([]),p=B([]),d=Y(),f=l(()=>d.menus),_=H().layoutSetting,L=l(()=>_.layout==="topmenu"),v=l(()=>_.menuTheme),b=()=>c.meta.namePath??c.matched.slice(1).map(h=>h.name),$=h=>e.getRoutes().find(w=>w.name===h);ae(()=>o.collapsed,()=>{r.value=c.name?[c.name]:[],p.value=b()}),ae(()=>c.fullPath,()=>{r.value=c.name?[c.name]:[],p.value=b()},{immediate:!0});const y=({key:h})=>{if(h===c.name)return;const w=r.value,x=$(h),{outsideLink:S}=(x==null?void 0:x.meta)||{};x&&S&&He(()=>{r.value=w})};return(h,w)=>{const x=ve;return t(),u(x,{class:"border-none!","selected-keys":r.value,"onUpdate:selectedKeys":w[0]||(w[0]=S=>r.value=S),"open-keys":L.value?[]:p.value,mode:L.value?"horizontal":"inline",theme:v.value,collapsed:m.collapsed,collapsible:"",onClick:y},{default:a(()=>[(t(!0),O(K,null,J(f.value,S=>(t(),u(ia,{key:S.name,item:S},null,8,["item"]))),128))]),_:1},8,["selected-keys","open-keys","mode","theme","collapsed"])}}},da=(m,o=1)=>{let c=0,e=0,r=0;return m.length===4?(c="0x"+m[1]+m[1],e="0x"+m[2]+m[2],r="0x"+m[3]+m[3]):m.length===7&&(c="0x"+m[1]+m[2],e="0x"+m[3]+m[4],r="0x"+m[5]+m[6]),`rgba(${+c},${+e},${+r},${o})`},pa={class:"layout-breadcrumb"},ma={class:"cursor-pointer"},_a={__name:"LayoutBreadcrumb",setup(m){const{t:o}=Z(),c=oe(),e=le(),r=Y(),p=H(),d=l(()=>p.headerColor),f=l(()=>d.value==="#fff"?"dark":"light"),i=l(()=>{var b,$,y;if((b=e.meta)!=null&&b.namePath){let h=r.menus;const w=(y=($=e.meta)==null?void 0:$.namePath)==null?void 0:y.map(x=>{const S=h.find(D=>D.name===x);return h=(S==null?void 0:S.children)||[],S});return[{name:"__index",meta:{title:"route.home"},children:r.menus},...w]}return e.matched}),_=b=>{const{outsideLink:$}=(b==null?void 0:b.meta)||{};if($)window.open(b.path);else{const y=typeof b.redirect=="string"?b.redirect:b;c.push(y)}},L=b=>{var $;return[($=i.value[b+1])==null?void 0:$.name]},v=l(()=>({"--breadcrumb-overlay-color":da(d.value,.5),"--breadcrumb-color":d.value}));return(b,$)=>{const y=_e,h=ve,w=Kt,x=Nt;return t(),O("div",pa,[n(x,{style:z(v.value)},{default:a(()=>[(t(!0),O(K,null,J(i.value,(S,D)=>{var N;return t(),u(w,{key:S==null?void 0:S.name},gt({default:a(()=>{var R;return[j("span",ma,M(s(o)((R=S==null?void 0:S.meta)==null?void 0:R.title)),1)]}),_:2},[(N=S==null?void 0:S.children)!=null&&N.length?{name:"overlay",fn:a(()=>[n(h,{"selected-keys":L(D),theme:f.value},{default:a(()=>[(t(!0),O(K,null,J(S==null?void 0:S.children,R=>(t(),u(y,{key:R.name,onClick:C=>_(R)},{default:a(()=>{var C;return[j("span",null,M(s(o)((C=R.meta)==null?void 0:C.title)),1)]}),_:2},1032,["onClick"]))),128))]),_:2},1032,["selected-keys","theme"])]),key:"0"}:void 0]),1024)}),128))]),_:1},8,["style"])])}}},va=Se(_a,[["__scopeId","data-v-c21bbf1c"]]),fa=wt({__name:"FullScreen",setup(m){const{toggle:o,isFullscreen:c}=vt(),{t:e}=Z(),r=l(()=>s(c)?e("setting.exitFullscreen"):e("setting.fullscreen"));return(p,d)=>{const f=pe;return t(),u(f,{title:r.value},{default:a(()=>[j("span",{onClick:d[0]||(d[0]=(...i)=>s(o)&&s(o)(...i)),class:"cursor-pointer"},[s(c)?(t(),u(s(Tt),{key:1})):(t(),u(s(xt),{key:0}))])]),_:1},8,["title"])}}}),ya={key:0,class:"max-h600px overflow-auto"},ha={class:"flex-bc"},ga={key:0},wa={__name:"SearchMenu",setup(m){const o=oe(),{t:c}=Z(),e=Y(),r=l(()=>e.menuList),p=H(),d=l(()=>p.layoutSetting),f=B(!1),i=B(""),_=kt([]),L=B(null),v=B("");ae(()=>f.value,()=>{f.value&&He(()=>{L.value.focus()})});const b=ft(()=>$(),300),$=()=>{var h;i.value?(_.value=r.value.filter(w=>{var x;return(x=w.searchTitle)==null?void 0:x.toLocaleLowerCase().includes(i.value.toLocaleLowerCase().trim())}),v.value=(h=_.value[0])==null?void 0:h.name):(_.value=[],v.value="")},y=()=>{v.value&&(o.push({name:v.value}),f.value=!1,i.value="",_.value=[])};return re("Enter",y),re("Escape",()=>{f.value=!1,i.value="",_.value=[]}),re("ArrowUp",()=>{const{length:h}=_.value;if(!h)return;const w=_.value.findIndex(x=>x.name===v.value);w===0?v.value=_.value[h-1].name:v.value=_.value[w-1].name}),re("ArrowDown",()=>{const{length:h}=_.value;if(!h)return;const w=_.value.findIndex(x=>x.name===v.value);w===h-1?v.value=_.value[0].name:v.value=_.value[w+1].name}),(h,w)=>{const x=Ve,S=me,D=Vt,N=Wt,R=xe,C=qe,I=pe;return t(),u(I,{title:s(c)("setting.searchMenu")},{default:a(()=>[n(s(Ee),{onClick:w[0]||(w[0]=E=>f.value=!0)}),n(C,{open:f.value,"onUpdate:open":w[2]||(w[2]=E=>f.value=E),closable:!1,keyboard:!1},{footer:a(()=>[j("div",ha,[n(R,{size:20},{default:a(()=>[n(N,{class:"flex items-center"},{default:a(()=>[n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-return"}),A(" "+M(s(c)("setting.confirm")),1)]),_:1}),n(N,{class:"flex items-center"},{default:a(()=>[n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-arrow-up"}),n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-arrow-down"}),A(" "+M(s(c)("setting.toggle")),1)]),_:1}),n(N,{class:"flex items-center"},{default:a(()=>[n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-esc"}),A(" "+M(s(c)("setting.close")),1)]),_:1})]),_:1}),_.value.length>0?(t(),O("span",ga,"共"+M(_.value.length)+"项",1)):T("",!0)])]),default:a(()=>[n(x,{ref_key:"inputRef",ref:L,size:"large",placeholder:"搜索菜单",value:i.value,"onUpdate:value":w[1]||(w[1]=E=>i.value=E),onChange:s(b)},{prefix:a(()=>[n(s(Ee))]),_:1},8,["value","onChange"]),_.value.length>0?(t(),O("div",ya,[(t(!0),O(K,null,J(_.value,E=>(t(),u(S,{key:E.path,class:"shadow mt10px cursor-pointer",bodyStyle:{padding:"18px"},style:z(v.value===E.name?{background:d.value.colorPrimary,color:"#fff"}:{}),onMouseenter:q=>v.value=E.name,onClick:y},{default:a(()=>[n(s(te),{class:"iconify anticon mr10px",icon:E.meta.icon},null,8,["icon"]),A(" "+M(E.searchTitle)+" ",1),v.value===E.name?(t(),u(s(te),{key:0,class:"float-right mt5px",icon:"mdi:keyboard-return"})):T("",!0)]),_:2},1032,["style","onMouseenter"]))),128))])):(t(),u(D,{key:1,class:"p20px m0"}))]),_:1},8,["open"])]),_:1},8,["title"])}}},ka={__name:"ChangePassword",setup(m){const{t:o}=Z(),c=Ke(),e=B({password:"",new_password:"",confirm_password:""}),r=()=>{if(e.value.new_password!=e.value.confirm_password){de.error(o("message.TwoDifferentPasswords"));return}c.changePassword(e.value).then(()=>{de.success(`${o("message.modifySuccess")},${o("message.jumpTo3")}`),setTimeout(()=>{c.logout()},3*1e3)})},p=d=>{console.log("Failed:",d)};return(d,f)=>{const i=qt,_=zt,L=We,v=Gt;return t(),u(v,{model:e.value,onFinish:r,onFinishFailed:p},{default:a(()=>[n(_,{name:"password",rules:[{required:!0,message:s(o)("message.PleaseEnterOriginalPassword")}]},{default:a(()=>[n(i,{value:e.value.password,"onUpdate:value":f[0]||(f[0]=b=>e.value.password=b),placeholder:s(o)("message.PleaseEnterOriginalPassword")},{prefix:a(()=>[n(s(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,{name:"new_password",rules:[{required:!0,message:s(o)("message.pleaseEnterNewPassword")},{min:6,message:s(o)("message.PasswordLength"),trigger:"blur"}]},{default:a(()=>[n(i,{value:e.value.new_password,"onUpdate:value":f[1]||(f[1]=b=>e.value.new_password=b),placeholder:s(o)("message.pleaseEnterNewPassword")},{prefix:a(()=>[n(s(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,{name:"confirm_password",rules:[{required:!0,message:s(o)("message.PleaseEnterConfirmPassword")},{min:6,message:s(o)("message.PasswordLength"),trigger:"blur"}]},{default:a(()=>[n(i,{value:e.value.confirm_password,"onUpdate:value":f[2]||(f[2]=b=>e.value.confirm_password=b),placeholder:s(o)("message.PleaseEnterConfirmPassword")},{prefix:a(()=>[n(s(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,null,{default:a(()=>[n(L,{class:"w100%",type:"primary","html-type":"submit"},{default:a(()=>[A(M(s(o)("setting.confirm")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}},ba={__name:"UserAvatar",setup(m){const{t:o}=Z(),c=Ke(),e=l(()=>c.userInfo),r=B(!1),p=()=>{c.logout()},d=()=>{r.value=!0};return(f,i)=>{const _=_e,L=ve,v=Ge,b=qe;return t(),O("div",null,[n(v,{class:"cp"},{overlay:a(()=>[n(L,null,{default:a(()=>[n(_,{onClick:d},{default:a(()=>[A(M(s(o)("setting.changePassword")),1)]),_:1}),n(_,{onClick:p},{default:a(()=>[A(M(s(o)("setting.logout")),1)]),_:1})]),_:1})]),default:a(()=>[j("span",null,M(e.value.user&&e.value.user.username||"admin"),1)]),_:1}),n(b,{open:r.value,"onUpdate:open":i[0]||(i[0]=$=>r.value=$),title:s(o)("setting.changePassword")},{footer:a(()=>[...i[1]||(i[1]=[])]),default:a(()=>[n(ka)]),_:1},8,["open","title"])])}}},Sa={class:"flex-cc flex-1"},ge={__name:"LayoutHeader",props:{collapsed:{type:Boolean}},emits:["update:collapsed"],setup(m,{emit:o}){const{t:c}=Z();Y();const e=H(),r=e.layoutSetting,p=l(()=>r.layout==="sidemenu"),d=l(()=>r.layout==="topmenu"),f=l(()=>r.layout==="mixinmenu"),i=l(()=>r.showBreadcrumb);l(()=>r.showSearchMenu),l(()=>r.showLockScreen),l(()=>r.showFullScreen),l(()=>r.showSetting),l(()=>r.showRefreshReset),l(()=>r.locale);const _=l(()=>r.sidemenuWidth),L=l(()=>e.headerBackground),v=l(()=>e.headerColor),b=l(()=>e.border),$=o,y=l(()=>({height:"var(--app-header-height)",padding:p.value?"0 20px":"0 20px 0 0",background:L.value,color:v.value,borderBottom:b.value}));return(h,w)=>{const x=xe,S=Jt;return t(),u(S,{class:"flex-bc",style:z(y.value)},{default:a(()=>[p.value?T("",!0):(t(),O("div",{key:0,style:z({width:`${_.value}px`})},[ce(h.$slots,"title")],4)),d.value?T("",!0):(t(),O("div",{key:1,style:z({paddingLeft:f.value?"20px":0})},[ce(h.$slots,"left"),d.value?T("",!0):(t(),u(x,{key:0,size:20},{default:a(()=>[j("span",{class:"cursor-pointer",onClick:w[0]||(w[0]=()=>$("update:collapsed",!m.collapsed))},[(t(),u(be(m.collapsed?s(Ct):s(Lt))))]),i.value?(t(),u(va,{key:0})):T("",!0)]),_:1}))],4)),j("div",Sa,[ce(h.$slots,"menu")]),j("div",null,[n(x,{size:20},{default:a(()=>[n(ba)]),_:1})])]),_:3},8,["style"])}}},xa={href:"http://www.easydarwin.org",target:"_blank"},we={__name:"LayoutFooter",setup(m){const o=Y(),c=l(()=>o.systemTime),e=H(),r=l(()=>e.layoutSetting.copyright);return(p,d)=>{const f=me,i=Xt;return t(),u(i,{style:{padding:"0 20px 20px 20px"}},{default:a(()=>[n(f,{class:"text-center",bodyStyle:{padding:"10px"}},{default:a(()=>[A(" Copyright © 2012~"+M(c.value.year)+" ",1),j("a",xa,"www."+M(r.value)+".org",1)]),_:1})]),_:1})}}},Ta={key:1,style:{display:"inline-block"}},Ie={__name:"TabsOperator",props:{tabItem:{type:Object,required:!0},isExtra:{type:Boolean,default:!1}},setup(m,{expose:o}){const c=m,{t:e}=Z(),r=le(),p=oe(),d=Y(),f=!1,i=l(()=>{var R;return(R=d.getCurrentTab)==null?void 0:R.fullPath}),_=l(()=>d.getTabsList),v=H().layoutSetting,b=l(()=>v.tabsIcon),$=R=>p.currentRoute.value.matched.some(C=>C.name===R.name),y=()=>{p.replace({name:"Refresh",path:s(r).fullPath})},h=()=>{if(_.value.length===1)return de.warning(e("message.lastPageCannotBeClosed"));d.closeCurrentTab(c.tabItem)};o({removeTab:h});const w=()=>{d.closeLeftTabs(c.tabItem),!$(c.tabItem)&&p.replace(c.tabItem.fullPath)},x=()=>{d.closeRightTabs(c.tabItem),!$(c.tabItem)&&p.replace(c.tabItem.fullPath)},S=()=>{d.closeOtherTabs(c.tabItem),!$(c.tabItem)&&p.replace(c.tabItem.fullPath)},D=()=>{d.closeAllTabs(),p.replace("/")},N=async()=>{{console.warn("仅在开发环境有效");return}};return(R,C)=>{const I=_e,E=Je,q=ve,V=Ge;return t(),u(V,{trigger:[m.isExtra?"click":"contextmenu"]},{overlay:a(()=>[n(q,{style:{"user-select":"none"}},{default:a(()=>[n(I,{key:"1",disabled:i.value!==m.tabItem.fullPath,onClick:y},{default:a(()=>[n(s(Ne)),C[1]||(C[1]=A(" 重新加载 ",-1))]),_:1},8,["disabled"]),n(I,{key:"2",onClick:h},{default:a(()=>[n(s(Pt)),C[2]||(C[2]=A(" 关闭标签页 ",-1))]),_:1}),n(E,{class:"m0"}),n(I,{key:"3",onClick:w},{default:a(()=>[n(s(Rt)),C[3]||(C[3]=A(" 关闭左侧标签页 ",-1))]),_:1}),n(I,{key:"4",onClick:x},{default:a(()=>[n(s(Ft)),C[4]||(C[4]=A(" 关闭右侧标签页 ",-1))]),_:1}),n(E,{class:"m0"}),n(I,{key:"5",onClick:S},{default:a(()=>[n(s(De)),C[5]||(C[5]=A(" 关闭其他标签页 ",-1))]),_:1}),n(I,{key:"6",onClick:D},{default:a(()=>[n(s(Ot)),C[6]||(C[6]=A(" 关闭全部标签页 ",-1))]),_:1}),s(f)?(t(),O(K,{key:0},[n(E,{class:"m0"}),n(I,{key:"7",onClick:N},{default:a(()=>[n(s(De)),C[7]||(C[7]=A(" 打开页面文件 ",-1))]),_:1})],64)):T("",!0)]),_:1})]),default:a(()=>{var G;return[m.isExtra?(t(),O("span",{key:0,class:"cursor-pointer",onClick:C[0]||(C[0]=bt(()=>{},["prevent"]))},[n(s($t))])):(t(),O("div",Ta,[b.value?(t(),u(s(te),{key:0,class:"iconify anticon",icon:m.tabItem.meta.icon},null,8,["icon"])):T("",!0),j("span",null,M(s(e)((G=m.tabItem.meta)==null?void 0:G.title)),1)]))]}),_:1},8,["trigger"])}}},Ca={class:"tabs-view"},La={__name:"LayoutTabs",setup(m){const o=le(),c=oe(),e=Y(),p=H().layoutSetting,d=l(()=>p.showHeader),f=l(()=>p.showTabs),i=l(()=>p.showSearchMenu),_=l(()=>p.showFullScreen),L=l(()=>p.showLockScreen),v=l(()=>p.showSetting),b=l(()=>p.showRefreshReset),$=B(o.fullPath);ae(()=>o.fullPath,R=>{$.value=R});const y={},h=R=>{Object.is(o.fullPath,R)||c.push(R)},w=(R,C)=>{var I;C==="remove"&&((I=y[R])==null||I.removeTab())},x=l(()=>p.algorithm==="darkAlgorithm"?"black":"white"),S=l(()=>`${p.borderRadius}px`),D=l(()=>p.algorithm==="darkAlgorithm"?"1px solid black":"1px solid #eee"),N=B({margin:0,padding:"5px 20px",userSelect:"none",background:x,"--border-radius":S,"--border":D});return(R,C)=>{const I=Zt,E=Je,q=pe,V=xe,G=Yt;return t(),O("div",Ca,[f.value?(t(),u(G,{key:0,class:"tabs",type:"editable-card",activeKey:$.value,"onUpdate:activeKey":C[2]||(C[2]=W=>$.value=W),hideAdd:!0,tabBarGutter:5,tabBarStyle:N.value,onChange:h,onEdit:w},{rightExtra:a(()=>[n(V,null,{split:a(()=>[n(E,{type:"vertical"})]),default:a(()=>[n(Ie,{tabItem:s(o),isExtra:!0},null,8,["tabItem"]),!d.value&&i.value?(t(),u(wa,{key:0})):T("",!0),!d.value&&L.value?(t(),u(q,{key:1,title:"锁屏"},{default:a(()=>[n(s(ie),{onClick:C[0]||(C[0]=W=>s(e).setLockScreenState(!0))})]),_:1})):T("",!0),!d.value&&_.value?(t(),u(fa,{key:2})):T("",!0),!d.value&&b.value?(t(),u(q,{key:3,title:"刷新重置"},{default:a(()=>[n(s(Ne),{onClick:C[1]||(C[1]=W=>s(e).clearCacheReload())})]),_:1})):T("",!0),!d.value&&v.value?(t(),u(Te,{key:4})):T("",!0)]),_:1})]),default:a(()=>[(t(!0),O(K,null,J(s(e).getTabsList,W=>(t(),u(I,{key:W.fullPath},{tab:a(()=>[n(Ie,{ref_for:!0,ref:g=>y[W.fullPath]=g,tabItem:W},null,8,["tabItem"])]),_:2},1024))),128))]),_:1},8,["activeKey","tabBarStyle"])):T("",!0),ce(R.$slots,"default",{},void 0,!0)])}}},ke=Se(La,[["__scopeId","data-v-b8cf4cbc"]]),$a={__name:"SideMenuLayout",setup(m){const o=B(!1),c=H(),e=c.layoutSetting,r=l(()=>e.sidemenuWidth),p=l(()=>e.menuTheme),d=l(()=>e.showTitle),f=l(()=>e.showHeader),i=l(()=>e.showFooter),_=l(()=>e.watermark),L=l(()=>e.watermarkArea==="content"),v=l(()=>e.watermarkText),b=l(()=>c.border);return($,y)=>{const h=Xe,w=se,x=fe,S=ue;return t(),u(S,{class:"h100vh overflow-hidden"},{default:a(()=>[n(h,{collapsed:o.value,"onUpdate:collapsed":y[0]||(y[0]=D=>o.value=D),width:r.value,collapsedWidth:80,collapsible:!0,trigger:null,theme:p.value,style:z({borderRight:b.value})},{default:a(()=>[d.value?(t(),u(ye,{key:0,collapsed:o.value},null,8,["collapsed"])):T("",!0),n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed","width","theme","style"]),n(S,null,{default:a(()=>[f.value?(t(),u(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":y[1]||(y[1]=D=>o.value=D)},null,8,["collapsed"])):T("",!0),n(x,null,{default:a(()=>[n(ke),_.value&&L.value?(t(),u(w,{key:0,content:v.value},{default:a(()=>[n(X)]),_:1},8,["content"])):(t(),u(X,{key:1}))]),_:1}),i.value?(t(),u(we,{key:1})):T("",!0)]),_:1})]),_:1})}}},Pa={__name:"TopMenuLayout",setup(m){const o=B(!1),e=H().layoutSetting,r=l(()=>e.showTitle),p=l(()=>e.showHeader),d=l(()=>e.showFooter),f=l(()=>e.watermark),i=l(()=>e.watermarkArea==="content"),_=l(()=>e.watermarkText);return(L,v)=>{const b=se,$=fe,y=ue;return t(),u(y,{class:"h100vh overflow-hidden"},{default:a(()=>[p.value?(t(),u(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":v[0]||(v[0]=h=>o.value=h)},{title:a(()=>[r.value?(t(),u(ye,{key:0,collapsed:o.value},null,8,["collapsed"])):T("",!0)]),menu:a(()=>[n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed"])):T("",!0),n($,null,{default:a(()=>[n(ke),f.value&&i.value?(t(),u(b,{key:0,content:_.value},{default:a(()=>[n(X)]),_:1},8,["content"])):(t(),u(X,{key:1}))]),_:1}),d.value?(t(),u(we,{key:1})):T("",!0)]),_:1})}}},Ra={__name:"MixinMenuLayout",setup(m){const o=B(!1),c=H(),e=c.layoutSetting,r=l(()=>e.menuTheme),p=l(()=>e.showTitle),d=l(()=>e.showHeader),f=l(()=>e.showFooter),i=l(()=>e.sidemenuWidth),_=l(()=>e.watermark),L=l(()=>e.watermarkArea==="content"),v=l(()=>e.watermarkText),b=l(()=>c.border);return($,y)=>{const h=Xe,w=se,x=fe,S=ue;return t(),u(S,{class:"h100vh overflow-hidden"},{default:a(()=>[d.value?(t(),u(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":y[0]||(y[0]=D=>o.value=D)},{title:a(()=>[p.value?(t(),u(ye,{key:0})):T("",!0)]),_:1},8,["collapsed"])):T("",!0),n(S,null,{default:a(()=>[n(h,{collapsed:o.value,"onUpdate:collapsed":y[1]||(y[1]=D=>o.value=D),width:i.value,theme:r.value,collapsedWidth:80,collapsible:!0,trigger:null,style:z({borderRight:b.value})},{default:a(()=>[n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed","width","theme","style"]),n(S,null,{default:a(()=>[n(x,null,{default:a(()=>[n(ke),_.value&&L.value?(t(),u(w,{key:0,content:v.value},{default:a(()=>[n(X)]),_:1},8,["content"])):(t(),u(X,{key:1}))]),_:1}),f.value?(t(),u(we,{key:0})):T("",!0)]),_:1})]),_:1})]),_:1})}}},Fa={__name:"MobileDeviceLayout",setup(m){const o=B(!1),e=H().layoutSetting,r=l(()=>e.sidemenuWidth),p=l(()=>e.showTitle),d=l(()=>e.showHeader),f=l(()=>e.showFooter),i=l(()=>e.watermark),_=l(()=>e.watermarkArea==="content"),L=l(()=>e.watermarkText);return(v,b)=>{const $=ze,y=se,h=fe,w=ue;return t(),u(w,null,{default:a(()=>[n($,{open:o.value,"onUpdate:open":b[0]||(b[0]=x=>o.value=x),placement:"left",bodyStyle:{padding:0},width:r.value,closable:!1},{default:a(()=>[p.value?(t(),u(ye,{key:0,collapsed:!1})):T("",!0),n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["open","width"]),d.value?(t(),u(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":b[1]||(b[1]=x=>o.value=x)},null,8,["collapsed"])):T("",!0),n(h,null,{default:a(()=>[n(ke),i.value&&_.value?(t(),u(y,{key:0,content:L.value},{default:a(()=>[n(X)]),_:1},8,["content"])):(t(),u(X,{key:1}))]),_:1}),f.value?(t(),u(we,{key:1})):T("",!0)]),_:1})}}},_o={__name:"LayoutDefault",setup(m){const c=H().layoutSetting,e=l(()=>c.layout==="sidemenu"),r=l(()=>c.layout==="topmenu"),p=l(()=>c.layout==="mixinmenu"),d=l(()=>c.onlyShowContent),f=Y(),i=l(()=>f.device);return(_,L)=>d.value?(t(),u(sa,{key:1})):(t(),O(K,{key:0},[i.value==="desktop"?(t(),O(K,{key:0},[e.value?(t(),u($a,{key:0})):r.value?(t(),u(Pa,{key:1})):p.value?(t(),u(Ra,{key:2})):T("",!0)],64)):i.value==="mobile"?(t(),u(Fa,{key:1})):T("",!0)],64))}};export{_o as default};
